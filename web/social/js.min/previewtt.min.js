Effect.SetDims=Class.create();Object.extend(Object.extend(Effect.SetDims.prototype,Effect.Base.prototype),{initialize:function(a){this.element=$(a);var b=Object.extend({width:0,height:0,duration:0.5},arguments[1]||{});this.start(b)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.originalStyle={};["width","height"].each(function(a){this.originalStyle[a]=this.element.style[a]}.bind(this));this.dims=[this.element.offsetWidth,this.element.offsetHeight];this.factor=[this.element.offsetWidth-this.options.width,this.element.offsetHeight-this.options.height]},update:function(b){var a=[this.factor[0]*b,this.factor[1]*b];this.setDimensions(this.dims[0]-a[0],this.dims[1]-a[1])},finish:function(a){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}},setDimensions:function(c,b){var a={width:c+"px",height:b+"px"};this.element.setStyle(a)}});var PreviewToolTip=Class.create();PreviewToolTip.prototype={options:{},opened:true,initialize:function(b){b=$(b);var c=Object.extend({element:b,id:"preview_"+Math.random(),previewClass:"previewWindow",pimpClass:"previewPimp",position:"absolute"},arguments[1]||{});this.element=b;this.preview=document.createElement("DIV");this.preview.id=c.id;this.preview.className=c.previewClass;this.preview.style.position=c.position;this.pimp=document.createElement("DIV");this.pimp.className=c.pimpClass;this.pimp.onclick=(function(d){if(this.opened){this.hide()}else{this.show()}}).bindAsEventListener(this);this.element.appendChild(this.pimp);this.element.appendChild(this.preview);var a=Element.getDimensions(this.pimp);this.options=c},hide:function(){this.opened=false;var a=Element.getDimensions(this.pimp);new Effect.SetDims(this.preview,{width:0,height:0,duration:0.5,restoreAfterFinish:true,afterFinish:(function(){this.preview.style.visibility="hidden";this.pimp.style.backgroundPosition="bottom"}).bind(this)})},show:function(){this.opened=true;var a=Element.getDimensions(this.preview);this.preview.style.width="0px";this.preview.style.height="0px";this.preview.style.visibility="visible";new Effect.SetDims(this.preview,{width:a.width-6,height:a.height-6,duration:0.5,afterFinish:(function(){this.pimp.style.backgroundPosition="top"}).bind(this)})}};