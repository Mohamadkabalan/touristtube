(function(b){b.fn.IsBubblePopupOpen=function(){var a=null;b(this).each(function(f,g){var c=b(g).data("private_jquerybubblepopup_options");if(c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)&&c.privateVars!=null&&typeof c.privateVars=="object"&&!b.isArray(c.privateVars)&&!b.isEmptyObject(c.privateVars)&&typeof c.privateVars.is_open!="undefined"){a=c.privateVars.is_open?true:false}return false});return a};b.fn.GetBubblePopupLastDisplayDateTime=function(){var a=null;b(this).each(function(g,h){var c=b(h).data("private_jquerybubblepopup_options");if(c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)&&c.privateVars!=null&&typeof c.privateVars=="object"&&!b.isArray(c.privateVars)&&!b.isEmptyObject(c.privateVars)&&typeof c.privateVars.last_display_datetime!="undefined"&&c.privateVars.last_display_datetime!=null){a=d(c.privateVars.last_display_datetime)}return false});function d(c){return new Date(c*1000)}return a};b.fn.GetBubblePopupLastModifiedDateTime=function(){var a=null;b(this).each(function(g,h){var c=b(h).data("private_jquerybubblepopup_options");if(c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)&&c.privateVars!=null&&typeof c.privateVars=="object"&&!b.isArray(c.privateVars)&&!b.isEmptyObject(c.privateVars)&&typeof c.privateVars.last_modified_datetime!="undefined"&&c.privateVars.last_modified_datetime!=null){a=d(c.privateVars.last_modified_datetime)}return false});function d(c){return new Date(c*1000)}return a};b.fn.GetBubblePopupCreationDateTime=function(){var a=null;b(this).each(function(g,h){var c=b(h).data("private_jquerybubblepopup_options");if(c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)&&c.privateVars!=null&&typeof c.privateVars=="object"&&!b.isArray(c.privateVars)&&!b.isEmptyObject(c.privateVars)&&typeof c.privateVars.creation_datetime!="undefined"&&c.privateVars.creation_datetime!=null){a=d(c.privateVars.creation_datetime)}return false});function d(c){return new Date(c*1000)}return a};b.fn.GetBubblePopupMarkup=function(){var a=null;b(this).each(function(g,h){var f=b(h).data("private_jquerybubblepopup_options");if(f!=null&&typeof f=="object"&&!b.isArray(f)&&!b.isEmptyObject(f)&&f.privateVars!=null&&typeof f.privateVars=="object"&&!b.isArray(f.privateVars)&&!b.isEmptyObject(f.privateVars)&&typeof f.privateVars.id!="undefined"){a=b("#"+f.privateVars.id).length>0?b("#"+f.privateVars.id).html():null}return false});return a};b.fn.GetBubblePopupID=function(){var a=null;b(this).each(function(g,h){var f=b(h).data("private_jquerybubblepopup_options");if(f!=null&&typeof f=="object"&&!b.isArray(f)&&!b.isEmptyObject(f)&&f.privateVars!=null&&typeof f.privateVars=="object"&&!b.isArray(f.privateVars)&&!b.isEmptyObject(f.privateVars)&&typeof f.privateVars.id!="undefined"){a=f.privateVars.id}return false});return a};b.fn.RemoveBubblePopup=function(){var a=0;b(this).each(function(g,h){var f=b(h).data("private_jquerybubblepopup_options");if(f!=null&&typeof f=="object"&&!b.isArray(f)&&!b.isEmptyObject(f)&&f.privateVars!=null&&typeof f.privateVars=="object"&&!b.isArray(f.privateVars)&&!b.isEmptyObject(f.privateVars)&&typeof f.privateVars.id!="undefined"){b(h).unbind("managebubblepopup");b(h).unbind("setbubblepopupinnerhtml");b(h).unbind("setbubblepopupoptions");b(h).unbind("positionbubblepopup");b(h).unbind("freezebubblepopup");b(h).unbind("unfreezebubblepopup");b(h).unbind("showbubblepopup");b(h).unbind("hidebubblepopup");b(h).data("private_jquerybubblepopup_options",{});if(b("#"+f.privateVars.id).length>0){b("#"+f.privateVars.id).remove()}a++}});return a};b.fn.HasBubblePopup=function(){var a=false;b(this).each(function(f,g){var c=b(g).data("private_jquerybubblepopup_options");if(c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)&&c.privateVars!=null&&typeof c.privateVars=="object"&&!b.isArray(c.privateVars)&&!b.isEmptyObject(c.privateVars)&&typeof c.privateVars.id!="undefined"){a=true}return false});return a};b.fn.GetBubblePopupOptions=function(){var a={};b(this).each(function(e,f){a=b(f).data("private_jquerybubblepopup_options");if(a!=null&&typeof a=="object"&&!b.isArray(a)&&!b.isEmptyObject(a)&&a.privateVars!=null&&typeof a.privateVars=="object"&&!b.isArray(a.privateVars)&&!b.isEmptyObject(a.privateVars)){delete a.privateVars}else{a=null}return false});if(b.isEmptyObject(a)){a=null}return a};b.fn.SetBubblePopupInnerHtml=function(a,d){b(this).each(function(c,f){if(typeof d!="boolean"){d=true}b(f).trigger("setbubblepopupinnerhtml",[a,d])})};b.fn.SetBubblePopupOptions=function(a){b(this).each(function(e,f){b(f).trigger("setbubblepopupoptions",[a])})};b.fn.ShowBubblePopup=function(a,d){b(this).each(function(c,f){b(f).trigger("showbubblepopup",[a,d,true]);return false})};b.fn.ShowAllBubblePopups=function(a,d){b(this).each(function(c,f){b(f).trigger("showbubblepopup",[a,d,true])})};b.fn.HideBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("hidebubblepopup",[true]);return false})};b.fn.HideAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("hidebubblepopup",[true])})};b.fn.FreezeBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("freezebubblepopup");return false})};b.fn.FreezeAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("freezebubblepopup")})};b.fn.UnfreezeBubblePopup=function(){b(this).each(function(a,d){b(d).trigger("unfreezebubblepopup");return false})};b.fn.UnfreezeAllBubblePopups=function(){b(this).each(function(a,d){b(d).trigger("unfreezebubblepopup")})};b.fn.CreateBubblePopup=function(v){var I={me:this,cache:[],options_key:"private_jquerybubblepopup_options",model_tr:["top","middle","bottom"],model_td:["left","middle","right"],model_markup:'<div class="{BASE_CLASS} {TEMPLATE_CLASS}"{DIV_STYLE} id="{DIV_ID}"> 									<table{TABLE_STYLE}> 									<tbody> 									<tr> 										<td class="{BASE_CLASS}-top-left"{TOP-LEFT_STYLE}>{TOP-LEFT}</td> 										<td class="{BASE_CLASS}-top-middle"{TOP-MIDDLE_STYLE}>{TOP-MIDDLE}</td> 										<td class="{BASE_CLASS}-top-right"{TOP-RIGHT_STYLE}>{TOP-RIGHT}</td> 									</tr> 									<tr> 										<td class="{BASE_CLASS}-middle-left"{MIDDLE-LEFT_STYLE}>{MIDDLE-LEFT}</td> 										<td class="{BASE_CLASS}-innerHtml"{INNERHTML_STYLE}>{INNERHTML}</td> 										<td class="{BASE_CLASS}-middle-right"{MIDDLE-RIGHT_STYLE}>{MIDDLE-RIGHT}</td> 									</tr> 									<tr> 										<td class="{BASE_CLASS}-bottom-left"{BOTTOM-LEFT_STYLE}>{BOTTOM-LEFT}</td> 										<td class="{BASE_CLASS}-bottom-middle"{BOTTOM-MIDDLE_STYLE}>{BOTTOM-MIDDLE}</td> 										<td class="{BASE_CLASS}-bottom-right"{BOTTOM-RIGHT_STYLE}>{BOTTOM-RIGHT}</td> 									</tr> 									</tbody> 									</table> 									</div>',privateVars:{id:null,creation_datetime:null,last_modified_datetime:null,last_display_datetime:null,is_open:false,is_freezed:false,is_animating:false,is_animation_complete:false,is_mouse_over:false,is_position_changed:false,last_options:{}},position:"top",positionValues:["left","top","right","bottom"],align:"center",alignValues:["left","center","right","top","middle","bottom"],alignHorizontalValues:["left","center","right"],alignVerticalValues:["top","middle","bottom"],distance:"20px",width:null,height:null,divStyle:{},tableStyle:{},innerHtml:null,innerHtmlStyle:{},tail:{align:"center",hidden:false},dropShadow:true,alwaysVisible:true,selectable:false,manageMouseEvents:true,mouseOver:"show",mouseOverValues:["show","hide"],mouseOut:"hide",mouseOutValues:["show","hide"],openingSpeed:250,closingSpeed:250,openingDelay:0,closingDelay:0,baseClass:"jquerybubblepopup",themeName:"azure",themePath:"jquerybubblepopup-themes/",themeMargins:{total:"13px",difference:"10px"},afterShown:function(){},afterHidden:function(){},hideElementId:[]};y(v);function x(e){var f={privateVars:{},width:I.width,height:I.height,divStyle:I.divStyle,tableStyle:I.tableStyle,position:I.position,align:I.align,distance:I.distance,openingSpeed:I.openingSpeed,closingSpeed:I.closingSpeed,openingDelay:I.openingDelay,closingDelay:I.closingDelay,mouseOver:I.mouseOver,mouseOut:I.mouseOut,tail:I.tail,innerHtml:I.innerHtml,innerHtmlStyle:I.innerHtmlStyle,baseClass:I.baseClass,themeName:I.themeName,themePath:I.themePath,themeMargins:I.themeMargins,dropShadow:I.dropShadow,manageMouseEvents:I.manageMouseEvents,alwaysVisible:I.alwaysVisible,selectable:I.selectable,afterShown:I.afterShown,afterHidden:I.afterHidden,hideElementId:I.hideElementId};var c=b.extend(false,f,(typeof e=="object"&&!b.isArray(e)&&!b.isEmptyObject(e)&&e!=null?e:{}));c.privateVars.id=I.privateVars.id;c.privateVars.creation_datetime=I.privateVars.creation_datetime;c.privateVars.last_modified_datetime=I.privateVars.last_modified_datetime;c.privateVars.last_display_datetime=I.privateVars.last_display_datetime;c.privateVars.is_open=I.privateVars.is_open;c.privateVars.is_freezed=I.privateVars.is_freezed;c.privateVars.is_animating=I.privateVars.is_animating;c.privateVars.is_animation_complete=I.privateVars.is_animation_complete;c.privateVars.is_mouse_over=I.privateVars.is_mouse_over;c.privateVars.is_position_changed=I.privateVars.is_position_changed;c.privateVars.last_options=I.privateVars.last_options;c.width=(typeof c.width=="string"||typeof c.width=="number")&&parseInt(c.width)>0?parseInt(c.width):I.width;c.height=(typeof c.height=="string"||typeof c.height=="number")&&parseInt(c.height)>0?parseInt(c.height):I.height;c.divStyle=c.divStyle!=null&&typeof c.divStyle=="object"&&!b.isArray(c.divStyle)&&!b.isEmptyObject(c.divStyle)?c.divStyle:I.divStyle;c.tableStyle=c.tableStyle!=null&&typeof c.tableStyle=="object"&&!b.isArray(c.tableStyle)&&!b.isEmptyObject(c.tableStyle)?c.tableStyle:I.tableStyle;c.position=typeof c.position=="string"&&F(c.position.toLowerCase(),I.positionValues)?c.position.toLowerCase():I.position;c.align=typeof c.align=="string"&&F(c.align.toLowerCase(),I.alignValues)?c.align.toLowerCase():I.align;c.distance=(typeof c.distance=="string"||typeof c.distance=="number")&&parseInt(c.distance)>=0?parseInt(c.distance):I.distance;c.openingSpeed=typeof c.openingSpeed=="number"&&parseInt(c.openingSpeed)>0?parseInt(c.openingSpeed):I.openingSpeed;c.closingSpeed=typeof c.closingSpeed=="number"&&parseInt(c.closingSpeed)>0?parseInt(c.closingSpeed):I.closingSpeed;c.openingDelay=typeof c.openingDelay=="number"&&c.openingDelay>=0?c.openingDelay:I.openingDelay;c.closingDelay=typeof c.closingDelay=="number"&&c.closingDelay>=0?c.closingDelay:I.closingDelay;c.mouseOver=typeof c.mouseOver=="string"&&F(c.mouseOver.toLowerCase(),I.mouseOverValues)?c.mouseOver.toLowerCase():I.mouseOver;c.mouseOut=typeof c.mouseOut=="string"&&F(c.mouseOut.toLowerCase(),I.mouseOutValues)?c.mouseOut.toLowerCase():I.mouseOut;c.tail=c.tail!=null&&typeof c.tail=="object"&&!b.isArray(c.tail)&&!b.isEmptyObject(c.tail)?c.tail:I.tail;c.tail.align=typeof c.tail.align!="undefined"?c.tail.align:I.tail.align;c.tail.hidden=typeof c.tail.hidden!="undefined"?c.tail.hidden:I.tail.hidden;c.innerHtml=typeof c.innerHtml=="string"&&c.innerHtml.length>0?c.innerHtml:I.innerHtml;c.innerHtmlStyle=c.innerHtmlStyle!=null&&typeof c.innerHtmlStyle=="object"&&!b.isArray(c.innerHtmlStyle)&&!b.isEmptyObject(c.innerHtmlStyle)?c.innerHtmlStyle:I.innerHtmlStyle;c.baseClass=A(typeof c.baseClass=="string"&&c.baseClass.length>0?c.baseClass:I.baseClass);c.themeName=typeof c.themeName=="string"&&c.themeName.length>0?b.trim(c.themeName):I.themeName;c.themePath=typeof c.themePath=="string"&&c.themePath.length>0?b.trim(c.themePath):I.themePath;c.themeMargins=c.themeMargins!=null&&typeof c.themeMargins=="object"&&!b.isArray(c.themeMargins)&&!b.isEmptyObject(c.themeMargins)&&(typeof parseInt(c.themeMargins.total)=="number"&&typeof parseInt(c.themeMargins.difference)=="number")?c.themeMargins:I.themeMargins;c.dropShadow=typeof c.dropShadow=="boolean"&&c.dropShadow==true?true:false;c.manageMouseEvents=typeof c.manageMouseEvents=="boolean"&&c.manageMouseEvents==true?true:false;c.alwaysVisible=typeof c.alwaysVisible=="boolean"&&c.alwaysVisible==true?true:false;c.selectable=typeof c.selectable=="boolean"&&c.selectable==true?true:false;c.afterShown=typeof c.afterShown=="function"?c.afterShown:I.afterShown;c.afterHidden=typeof c.afterHidden=="function"?c.afterHidden:I.afterHidden;c.hideElementId=b.isArray(c.hideElementId)?c.hideElementId:I.hideElementId;if(c.position=="left"||c.position=="right"){c.align=F(c.align,I.alignVerticalValues)?c.align:"middle"}else{c.align=F(c.align,I.alignHorizontalValues)?c.align:"center"}for(var d in c.tail){switch(d){case"align":c.tail.align=typeof c.tail.align=="string"&&F(c.tail.align.toLowerCase(),I.alignValues)?c.tail.align.toLowerCase():I.tail.align;if(c.position=="left"||c.position=="right"){c.tail.align=F(c.tail.align,I.alignVerticalValues)?c.tail.align:"middle"}else{c.tail.align=F(c.tail.align,I.alignHorizontalValues)?c.tail.align:"center"}break;case"hidden":c.tail.hidden=c.tail.hidden==true?true:false;break}}return c}function C(c){if(c==0){return 0}if(c>0){return -(Math.abs(c))}else{return Math.abs(c)}}function F(e,f){var c=false;for(var d in f){if(f[d]==e){c=true;break}}return c}function B(c){b(c).each(function(){b("<img/>")[0].src=this})}function a(c){if(c.hideElementId&&c.hideElementId.length>0){for(var d=0;d<c.hideElementId.length;d++){var e=(c.hideElementId[d].charAt(0)!="#"?"#"+c.hideElementId[d]:c.hideElementId[d]);b(e).css({visibility:"hidden"})}}}function J(d){if(d.hideElementId&&d.hideElementId.length>0){for(var e=0;e<d.hideElementId.length;e++){var g=(d.hideElementId[e].charAt(0)!="#"?"#"+d.hideElementId[e]:d.hideElementId[e]);b(g).css({visibility:"visible"});var f=b(g).length;for(var c=0;c<f.length;c++){b(f[c]).css({visibility:"visible"})}}}}function D(d){var f=d.themePath;var c=d.themeName;var e=(f.substring(f.length-1)=="/"||f.substring(f.length-1)=="\\")?f.substring(0,f.length-1)+"/"+c+"/":f+"/"+c+"/";return e+(d.dropShadow==true?(b.browser.msie?"ie/":""):"ie/")}function A(c){var d=c.substring(0,1)=="."?c.substring(1,c.length):c;return d}function H(d){if(b("#"+d.privateVars.id).length>0){var c="bottom-middle";switch(d.position){case"left":c="middle-right";break;case"top":c="bottom-middle";break;case"right":c="middle-left";break;case"bottom":c="top-middle";break}if(F(d.tail.align,I.alignHorizontalValues)){b("#"+d.privateVars.id).find("td."+d.baseClass+"-"+c).css("text-align",d.tail.align)}else{b("#"+d.privateVars.id).find("td."+d.baseClass+"-"+c).css("vertical-align",d.tail.align)}}}function G(p){var j=I.model_markup;var h=D(p);var r="";var i="";var o="";if(!p.tail.hidden){switch(p.position){case"left":i="right";o="{MIDDLE-RIGHT}";break;case"top":i="bottom";o="{BOTTOM-MIDDLE}";break;case"right":i="left";o="{MIDDLE-LEFT}";break;case"bottom":i="top";o="{TOP-MIDDLE}";break}r='<img src="'+h+"tail-"+i+"."+(p.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+p.baseClass+'-tail" />'}var n=I.model_tr;var L=I.model_td;var m,g,c,l;var d="";var s="";var f=new Array();for(g in n){if(!n.hasOwnProperty(g)){continue}c="";l="";for(m in L){if(!L.hasOwnProperty(m)){continue}c=n[g]+"-"+L[m];c=c.toUpperCase();l="{"+c+"_STYLE}";c="{"+c+"}";if(c==o){j=j.replace(c,r);d=""}else{j=j.replace(c,"");d=""}if(n[g]+"-"+L[m]!="middle-middle"){s=h+n[g]+"-"+L[m]+"."+(p.dropShadow==true?(b.browser.msie?"gif":"png"):"gif");f.push(s);j=j.replace(l,' style="'+d+"background-image:url("+s+');"')}}}if(f.length>0){B(f)}var q="";if(p.tableStyle!=null&&typeof p.tableStyle=="object"&&!b.isArray(p.tableStyle)&&!b.isEmptyObject(p.tableStyle)){for(var e in p.tableStyle){q+=e+":"+p.tableStyle[e]+";"}}q+=(p.width!=null||p.height!=null)?(p.width!=null?"width:"+p.width+"px;":"")+(p.height!=null?"height:"+p.height+"px;":""):"";j=q.length>0?j.replace("{TABLE_STYLE}",' style="'+q+'"'):j.replace("{TABLE_STYLE}","");var k="";if(p.divStyle!=null&&typeof p.divStyle=="object"&&!b.isArray(p.divStyle)&&!b.isEmptyObject(p.divStyle)){for(var e in p.divStyle){k+=e+":"+p.divStyle[e]+";"}}j=k.length>0?j.replace("{DIV_STYLE}",' style="'+k+'"'):j.replace("{DIV_STYLE}","");j=j.replace("{TEMPLATE_CLASS}",p.baseClass+"-"+p.themeName);j=p.privateVars.id!=null?j.replace("{DIV_ID}",p.privateVars.id):j.replace("{DIV_ID}","");while(j.indexOf("{BASE_CLASS}")>-1){j=j.replace("{BASE_CLASS}",p.baseClass)}j=p.innerHtml!=null?j.replace("{INNERHTML}",p.innerHtml):j.replace("{INNERHTML}","");l="";for(var e in p.innerHtmlStyle){l+=e+":"+p.innerHtmlStyle[e]+";"}j=l.length>0?j.replace("{INNERHTML_STYLE}",' style="'+l+'"'):j.replace("{INNERHTML_STYLE}","");return j}function w(){return Math.round(new Date().getTime()/1000)}function t(g,p,T){var q=T.position;var m=T.align;var V=T.distance;var h=T.themeMargins;var k=new Array();var Q=p.offset();var s=parseInt(Q.top);var U=parseInt(Q.left);var r=parseInt(p.outerWidth(false));var n=parseInt(p.outerHeight(false));var R=parseInt(g.outerWidth(false));var o=parseInt(g.outerHeight(false));h.difference=Math.abs(parseInt(h.difference));h.total=Math.abs(parseInt(h.total));var S=C(h.difference);var l=C(h.difference);var c=C(h.total);var j=D(T);switch(m){case"left":k.top=q=="top"?s-o-V+C(S):s+n+V+S;k.left=U+c;break;case"center":var f=Math.abs(R-r)/2;k.top=q=="top"?s-o-V+C(S):s+n+V+S;k.left=R>=r?U-f:U+f;break;case"right":var f=Math.abs(R-r);k.top=q=="top"?s-o-V+C(S):s+n+V+S;k.left=R>=r?U-f+C(c):U+f+C(c);break;case"top":k.top=s+c;k.left=q=="left"?U-R-V+C(l):U+r+V+l;break;case"middle":var f=Math.abs(o-n)/2;k.top=o>=n?s-f:s+f;k.left=q=="left"?U-R-V+C(l):U+r+V+l;break;case"bottom":var f=Math.abs(o-n);k.top=o>=n?s-f+C(c):s+f+C(c);k.left=q=="left"?U-R-V+C(l):U+r+V+l;break}k.position=q;if(b("#"+T.privateVars.id).length>0&&b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").length>0){b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").remove();var i="bottom";var e="bottom-middle";switch(q){case"left":i="right";e="middle-right";break;case"top":i="bottom";e="bottom-middle";break;case"right":i="left";e="middle-left";break;case"bottom":i="top";e="top-middle";break}b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+e).empty();b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+e).html('<img src="'+j+"tail-"+i+"."+(T.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+T.baseClass+'-tail" />');H(T)}if(T.alwaysVisible==true){if(k.top<b(window).scrollTop()||k.top+o>b(window).scrollTop()+b(window).height()){if(b("#"+T.privateVars.id).length>0&&b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").length>0){b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").remove()}var d="";if(k.top<b(window).scrollTop()){k.position="bottom";k.top=s+n+V+S;if(b("#"+T.privateVars.id).length>0&&!T.tail.hidden){b("#"+T.privateVars.id).find("td."+T.baseClass+"-top-middle").empty();b("#"+T.privateVars.id).find("td."+T.baseClass+"-top-middle").html('<img src="'+j+"tail-top."+(T.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+T.baseClass+'-tail" />');d="top-middle"}}else{if(k.top+o>b(window).scrollTop()+b(window).height()){k.position="top";k.top=s-o-V+C(S);if(b("#"+T.privateVars.id).length>0&&!T.tail.hidden){b("#"+T.privateVars.id).find("td."+T.baseClass+"-bottom-middle").empty();b("#"+T.privateVars.id).find("td."+T.baseClass+"-bottom-middle").html('<img src="'+j+"tail-bottom."+(T.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+T.baseClass+'-tail" />');d="bottom-middle"}}}if(k.left<0){k.left=0;if(d.length>0){b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+d).css("text-align","center")}}else{if(k.left+R>b(window).width()){k.left=b(window).width()-R;if(d.length>0){b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+d).css("text-align","center")}}}}else{if(k.left<0||k.left+R>b(window).width()){if(b("#"+T.privateVars.id).length>0&&b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").length>0){b("#"+T.privateVars.id).find("img."+T.baseClass+"-tail").remove()}var d="";if(k.left<0){k.position="right";k.left=U+r+V+l;if(b("#"+T.privateVars.id).length>0&&!T.tail.hidden){b("#"+T.privateVars.id).find("td."+T.baseClass+"-middle-left").empty();b("#"+T.privateVars.id).find("td."+T.baseClass+"-middle-left").html('<img src="'+j+"tail-left."+(T.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+T.baseClass+'-tail" />');d="middle-left"}}else{if(k.left+R>b(window).width()){k.position="left";k.left=U-R-V+C(l);if(b("#"+T.privateVars.id).length>0&&!T.tail.hidden){b("#"+T.privateVars.id).find("td."+T.baseClass+"-middle-right").empty();b("#"+T.privateVars.id).find("td."+T.baseClass+"-middle-right").html('<img src="'+j+"tail-right."+(T.dropShadow==true?(b.browser.msie?"gif":"png"):"gif")+'" alt="" class="'+T.baseClass+'-tail" />');d="middle-right"}}}if(k.top<b(window).scrollTop()){k.top=b(window).scrollTop();if(d.length>0){b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+d).css("vertical-align","middle")}}else{if(k.top+o>b(window).scrollTop()+b(window).height()){k.top=(b(window).scrollTop()+b(window).height())-o;if(d.length>0){b("#"+T.privateVars.id).find("td."+T.baseClass+"-"+d).css("vertical-align","middle")}}}}}}return k}function u(d,c){b(d).data(I.options_key,c)}function E(c){return b(c).data(I.options_key)}function z(c){var d=c!=null&&typeof c=="object"&&!b.isArray(c)&&!b.isEmptyObject(c)?true:false;return d}function y(c){b(window).resize(function(){b(I.me).each(function(d,e){b(e).trigger("positionbubblepopup")})});b(document).mousemove(function(d){b(I.me).each(function(e,f){b(f).trigger("managebubblepopup",[d.pageX,d.pageY])})});b(I.me).each(function(e,f){var d=x(c);d.privateVars.creation_datetime=w();d.privateVars.id=d.baseClass+"-"+d.privateVars.creation_datetime+"-"+e;u(f,d);b(f).bind("managebubblepopup",function(Q,i,h){var O=E(this);if(z(O)&&z(O.privateVars)&&typeof i!="undefined"&&typeof h!="undefined"){if(O.manageMouseEvents){var k=b(this);var R=k.offset();var r=parseInt(R.top);var n=parseInt(R.left);var l=parseInt(k.outerWidth(false));var q=parseInt(k.outerHeight(false));var p=false;if(n<=i&&i<=l+n&&r<=h&&h<=q+r){p=true}else{p=false}if(p&&!O.privateVars.is_mouse_over){O.privateVars.is_mouse_over=true;u(this,O);if(O.mouseOver=="show"){b(this).trigger("showbubblepopup")}else{if(O.selectable&&b("#"+O.privateVars.id).length>0){var P=b("#"+O.privateVars.id);var g=P.offset();var j=parseInt(g.top);var o=parseInt(g.left);var m=parseInt(P.outerWidth(false));var s=parseInt(P.outerHeight(false));if(o<=i&&i<=m+o&&j<=h&&h<=s+j){}else{b(this).trigger("hidebubblepopup")}}else{b(this).trigger("hidebubblepopup")}}}else{if(!p&&O.privateVars.is_mouse_over){O.privateVars.is_mouse_over=false;u(this,O);if(O.mouseOut=="show"){b(this).trigger("showbubblepopup")}else{if(O.selectable&&b("#"+O.privateVars.id).length>0){var P=b("#"+O.privateVars.id);var g=P.offset();var j=parseInt(g.top);var o=parseInt(g.left);var m=parseInt(P.outerWidth(false));var s=parseInt(P.outerHeight(false));if(o<=i&&i<=m+o&&j<=h&&h<=s+j){}else{b(this).trigger("hidebubblepopup")}}else{b(this).trigger("hidebubblepopup")}}}else{if(!p&&!O.privateVars.is_mouse_over){if(O.selectable&&b("#"+O.privateVars.id).length>0&&!O.privateVars.is_animating){var P=b("#"+O.privateVars.id);var g=P.offset();var j=parseInt(g.top);var o=parseInt(g.left);var m=parseInt(P.outerWidth(false));var s=parseInt(P.outerHeight(false));if(o<=i&&i<=m+o&&j<=h&&h<=s+j){}else{b(this).trigger("hidebubblepopup")}}}}}}}});b(f).bind("setbubblepopupinnerhtml",function(g,h,j){var i=E(this);if(z(i)&&z(i.privateVars)&&typeof h!="undefined"){i.privateVars.last_modified_datetime=w();if(typeof j=="boolean"&&j==true){i.innerHtml=h}u(this,i);if(b("#"+i.privateVars.id).length>0){b("#"+i.privateVars.id).find("td."+i.baseClass+"-innerHtml").html(h);if(i.privateVars.is_animation_complete){b(this).trigger("positionbubblepopup",[false])}else{b(this).trigger("positionbubblepopup",[true])}}}});b(f).bind("setbubblepopupoptions",function(g,j){var h=E(this);if(z(h)&&z(h.privateVars)){var i=h;h=x(j);h.privateVars.id=i.privateVars.id;h.privateVars.creation_datetime=i.privateVars.creation_datetime;h.privateVars.last_modified_datetime=w();h.privateVars.last_display_datetime=i.privateVars.last_display_datetime;h.privateVars.is_open=i.privateVars.is_open;h.privateVars.is_freezed=i.privateVars.is_freezed;h.privateVars.last_options={};u(this,h)}});b(f).bind("positionbubblepopup",function(g,k){var l=E(this);if(z(l)&&z(l.privateVars)&&b("#"+l.privateVars.id).length>0&&l.privateVars.is_open==true){var j=b("#"+l.privateVars.id);var i=t(j,b(this),l);var h=2;if(typeof k=="boolean"&&k==true){j.css({top:i.top,left:i.left})}else{switch(l.position){case"left":j.css({top:i.top,left:(i.position!=l.position?i.left-(Math.abs(l.themeMargins.difference)*h):i.left+(Math.abs(l.themeMargins.difference)*h))});break;case"top":j.css({top:(i.position!=l.position?i.top-(Math.abs(l.themeMargins.difference)*h):i.top+(Math.abs(l.themeMargins.difference)*h)),left:i.left});break;case"right":j.css({top:i.top,left:(i.position!=l.position?i.left+(Math.abs(l.themeMargins.difference)*h):i.left-(Math.abs(l.themeMargins.difference)*h))});break;case"bottom":j.css({top:(i.position!=l.position?i.top+(Math.abs(l.themeMargins.difference)*h):i.top-(Math.abs(l.themeMargins.difference)*h)),left:i.left});break}}}});b(f).bind("freezebubblepopup",function(){var g=E(this);if(z(g)&&z(g.privateVars)){g.privateVars.is_freezed=true;u(this,g)}});b(f).bind("unfreezebubblepopup",function(){var g=E(this);if(z(g)&&z(g.privateVars)){g.privateVars.is_freezed=false;u(this,g)}});b(f).bind("showbubblepopup",function(o,g,j,m){var n=E(this);if((typeof m=="boolean"&&m==true&&(z(n)&&z(n.privateVars)))||(typeof m=="undefined"&&(z(n)&&z(n.privateVars)&&!n.privateVars.is_freezed&&!n.privateVars.is_open))){if(typeof m=="boolean"&&m==true){b(this).trigger("unfreezebubblepopup")}n.privateVars.is_open=true;n.privateVars.is_freezed=false;n.privateVars.is_animating=false;n.privateVars.is_animation_complete=false;if(z(n.privateVars.last_options)){n=n.privateVars.last_options}else{n.privateVars.last_options={}}if(z(g)){var i=n;var l=w();n=x(g);n.privateVars.id=i.privateVars.id;n.privateVars.creation_datetime=i.privateVars.creation_datetime;n.privateVars.last_modified_datetime=l;n.privateVars.last_display_datetime=l;n.privateVars.is_open=true;n.privateVars.is_freezed=false;n.privateVars.is_animating=false;n.privateVars.is_animation_complete=false;n.privateVars.is_mouse_over=i.privateVars.is_mouse_over;n.privateVars.is_position_changed=i.privateVars.is_position_changed;n.privateVars.last_options={};if(typeof j=="boolean"&&j==false){i.privateVars.last_modified_datetime=l;i.privateVars.last_display_datetime=l;n.privateVars.last_options=i}}u(this,n);a(n);if(b("#"+n.privateVars.id).length>0){b("#"+n.privateVars.id).remove()}var p={};var h=G(n);p=b(h);p.appendTo("body");p=b("#"+n.privateVars.id);p.css({opacity:0,top:"0px",left:"0px",position:"absolute",display:"block"});if(n.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)<9){b("#"+n.privateVars.id+" table").addClass(n.baseClass+"-ie")}}H(n);var k=t(p,b(this),n);p.css({top:k.top,left:k.left});if(k.position==n.position){n.privateVars.is_position_changed=false}else{n.privateVars.is_position_changed=true}u(this,n);var q=setTimeout(function(){n.privateVars.is_animating=true;u(f,n);p.stop();switch(n.position){case"left":p.animate({opacity:1,left:(n.privateVars.is_position_changed?"-=":"+=")+n.distance+"px"},n.openingSpeed,"swing",function(){n.privateVars.is_animating=false;n.privateVars.is_animation_complete=true;u(f,n);if(n.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){p.addClass(n.baseClass+"-ie")}}n.afterShown()});break;case"top":p.animate({opacity:1,top:(n.privateVars.is_position_changed?"-=":"+=")+n.distance+"px"},n.openingSpeed,"swing",function(){n.privateVars.is_animating=false;n.privateVars.is_animation_complete=true;u(f,n);if(n.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){p.addClass(n.baseClass+"-ie")}}n.afterShown()});break;case"right":p.animate({opacity:1,left:(n.privateVars.is_position_changed?"+=":"-=")+n.distance+"px"},n.openingSpeed,"swing",function(){n.privateVars.is_animating=false;n.privateVars.is_animation_complete=true;u(f,n);if(n.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){p.addClass(n.baseClass+"-ie")}}n.afterShown()});break;case"bottom":p.animate({opacity:1,top:(n.privateVars.is_position_changed?"+=":"-=")+n.distance+"px"},n.openingSpeed,"swing",function(){n.privateVars.is_animating=false;n.privateVars.is_animation_complete=true;u(f,n);if(n.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){p.addClass(n.baseClass+"-ie")}}n.afterShown()});break}},n.openingDelay)}});b(f).bind("hidebubblepopup",function(h,j){var g=E(this);if((typeof j=="boolean"&&j==true&&(z(g)&&z(g.privateVars)&&b("#"+g.privateVars.id).length>0))||(typeof j=="undefined"&&(z(g)&&z(g.privateVars)&&b("#"+g.privateVars.id).length>0&&!g.privateVars.is_freezed&&g.privateVars.is_open))){if(typeof j=="boolean"&&j==true){b(this).trigger("unfreezebubblepopup")}g.privateVars.is_animating=false;g.privateVars.is_animation_complete=false;u(this,g);var k=b("#"+g.privateVars.id);var l=typeof j=="undefined"?g.closingDelay:0;var i=setTimeout(function(){g.privateVars.is_animating=true;u(f,g);k.stop();if(g.dropShadow==true){if(b.browser.msie&&parseInt(b.browser.version)>8){k.removeClass(g.baseClass+"-ie")}}switch(g.position){case"left":k.animate({opacity:0,left:(g.privateVars.is_position_changed?"+=":"-=")+g.distance+"px"},g.closingSpeed,"swing",function(){g.privateVars.is_open=false;g.privateVars.is_animating=false;g.privateVars.is_animation_complete=true;u(f,g);k.css("display","none");g.afterHidden()});break;case"top":k.animate({opacity:0,top:(g.privateVars.is_position_changed?"+=":"-=")+g.distance+"px"},g.closingSpeed,"swing",function(){g.privateVars.is_open=false;g.privateVars.is_animating=false;g.privateVars.is_animation_complete=true;u(f,g);k.css("display","none");g.afterHidden()});break;case"right":k.animate({opacity:0,left:(g.privateVars.is_position_changed?"-=":"+=")+g.distance+"px"},g.closingSpeed,"swing",function(){g.privateVars.is_open=false;g.privateVars.is_animating=false;g.privateVars.is_animation_complete=true;u(f,g);k.css("display","none");g.afterHidden()});break;case"bottom":k.animate({opacity:0,top:(g.privateVars.is_position_changed?"-=":"+=")+g.distance+"px"},g.closingSpeed,"swing",function(){g.privateVars.is_open=false;g.privateVars.is_animating=false;g.privateVars.is_animation_complete=true;u(f,g);k.css("display","none");g.afterHidden()});break}},l);g.privateVars.last_display_datetime=w();g.privateVars.is_freezed=false;u(this,g);J(g)}})})}return this}})(jQuery);