var $textarea_comments;(function(a){jQuery.fn.extend({elastic:function(){var b=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){if(this.type!=="textarea"){return false}var c=jQuery(this),d=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),g=parseInt(c.css("line-height"),10)||parseInt(c.css("font-size"),"10"),j=parseInt(c.css("height"),10)||g*3,h=parseInt(c.css("max-height"),10)||Number.MAX_VALUE,e=0;d.addClass("mentions_dup");$textarea_comments=c;if(h<0){h=Number.MAX_VALUE}d.appendTo(c.parent());var f=b.length;while(f--){d.css(b[f].toString(),c.css(b[f].toString()))}var m=a(".writecommentDiv.writecommentDivAuto").width()-20;d.css({width:m+"px"});function l(){var i=Math.floor(parseInt(c.width(),10))-20;if(d.width()!==i){d.css({width:(i)+"px"});n(true)}}function k(o,p){var i=Math.floor(parseInt(o,10));if(c.height()!==i){c.css({height:i+"px",overflow:p})}}function n(i){var p=c.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var q=d.html().replace(/<br>/ig,"<br />");if(i||p+"&nbsp;"!==q){d.html(p+"&nbsp;");if(Math.abs(d.height()+g-c.height())>3){var o=d.height()+g;if(o>=h){k(o,"auto")}else{if(o<=j){k(j,"hidden")}else{k(o,"hidden")}}}}}c.css({overflow:"hidden"});c.bind("keyup change cut paste",function(){n()});a(window).bind("resize",l);c.bind("resize",l);c.bind("update",n);c.bind("blur",function(){n(true)});c.bind("input paste",function(i){setTimeout(n,250)});n()})}})})(jQuery);