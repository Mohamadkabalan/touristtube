function ShowClaimdiv(a){$("#FormResult").html("");if(a==1){show=t("please ")+'<a href="#signIn" class="signin">'+t("sign in")+"</a> "+t("using this email or ")+'<a href="#resetIn" class="signin">'+t("reset your password")+"</a>"}else{show=a}$("#ClaimEmail").css("visibility","visible");$("#ClaimEmail").html(show)}function ShowChClaimdiv(a){$("#CFormResult").html("");if(a==1){show=t("please  ")+'<a href="#signIn" class="signin">'+t("sign in ")+"</a> "+t("using this email or  ")+'<a href="#resetIn" class="signin">'+t("reset your password ")+"</a>"}else{show=a}$("#CClaimEmail").css("visibility","visible");$("#CClaimEmail").html(show)}function openSelected(b){if(b!=0){var c=$("#"+b);var a=c.find(".regHeader").attr("rel");$("#BecomeTuberForm").removeClass("selected").css({height:"60px"});$("#CreateChannelForm").removeClass("selected").css({height:"60px"});c.css({height:a+"px"});c.addClass("selected")}}function ValidateRegisterForm(){if($("#fname").val()==""||$("#fname").val()=="..."){$("#FormResult").html($.i18n.t("Please insert your first name."));$("#fname").focus();return false}else{if($("#lname").val()==""||$("#lname").val()=="..."){$("#FormResult").html(t("Please insert your last name."));$("#lname").focus();return false}else{if($("#YourEmail").val()==""){$("#FormResult").html(t("Please insert your email."));$("#YourEmail").focus();return false}else{if(!validateEmail($("#YourEmail").val())){$("#FormResult").html(t("Please insert a correct email."));$("#YourEmail").focus();return false}else{if($("#YourUserName").val()==""){$("#FormResult").html(t("Please insert your username."));$("#YourUserName").focus();return false}else{if($("#YourPassword").val()==""){$("#FormResult").html(t("Please insert your password."));$("#YourPassword").focus();return false}else{if(($("#YourPassword").val()).length<6){$("#FormResult").html(t("Please your password should be at least 6 characters long."));$("#YourPassword").focus();return false}else{if($("#YourCPassword").val()==""){$("#FormResult").html(t("Please confirm your password."));$("#YourCPassword").focus();return false}else{if($("#YourCPassword").val()!=$("#YourPassword").val()){$("#FormResult").html(t("Password does not match."));$("#YourCPassword").focus();return false}else{if($("#YourBday").val()==""){$("#FormResult").html(t("Please insert your date of birth."));$("#YourBday").focus();return false}else{if(!isDateCheck($("#YourBday").val())||($("#YourBday").val()).length<10){$("#FormResult").html(t("Please check date format."));$("#YourBday").focus()}else{if($(".genderM").is(":not(:checked)")&&$(".genderF").is(":not(:checked)")){$("#FormResult").html(t("Please indicate your gender."));return false}else{$("#FormResult").html("");return true}}}}}}}}}}}}}function ValidateRegisterFormNew(){if($("#YourEmail").val()==""){$("#FormResult").html(t("Please insert your email."));$("#YourEmail").focus();return false}else{if(!validateEmail($("#YourEmail").val())){$("#FormResult").html(t("Please insert a correct email."));$("#YourEmail").focus();return false}else{if($("#YourPassword").val()==""){$("#FormResult").html(t("Please insert your password."));$("#YourPassword").focus();return false}else{if(($("#YourPassword").val()).length<6){$("#FormResult").html(t("Please your password should be at least 6 characters long."));$("#YourPassword").focus();return false}else{if($("#YourCPassword").val()==""){$("#FormResult").html(t("Please confirm your password."));$("#YourCPassword").focus();return false}else{if($("#YourCPassword").val()!=$("#YourPassword").val()){$("#FormResult").html(t("Password does not match."));$("#YourCPassword").focus();return false}else{$("#FormResult").html("");return true}}}}}}}function ValidateCahnnelForm(){if($("#oname").val()==""||$("#oname").val()=="..."){$("#CFormResult").html($.i18n.t("Please insert the owner name."));$("#oname").focus();return false}else{if($("#cname").val()==""||$("#cname").val()=="..."){$("#CFormResult").html(t("Please insert the channel name."));$("#cname").focus();return false}else{if($("#cemail").val()==""){$("#CFormResult").html(t("Please insert your email."));$("#cemail").focus();return false}else{if(!validateEmail($("#cemail").val())&&$("#cemail").length>0){$("#CFormResult").html(t("Please insert a correct email."));$("#cpassword").focus();return false}else{if($("#cpassword").val()==""){$("#CFormResult").html(t("Please insert your password."));$("#cpassword").focus();return false}else{if($("#cpassword").val()<6){$("#CFormResult").html(t("Please your password should be at least 6 characters long."));$("#cpassword").focus();return false}else{if($("#ccpassword").val()==""){$("#CFormResult").html(t("Please confirm your password."));$("#ccpassword").focus();return false}else{if($("#ccpassword").val()!=$("#cpassword").val()){$("#CFormResult").html(t("Password does not match."));$("#ccpassword").focus();return false}else{if($("#ccategory").val()=="0"){$("#CFormResult").html(t("Please choose a category."));$("#ccategory").focus();return false}else{if($("#ccountry").val()=="0"){$("#CFormResult").html(t("Please choose a country."));$("#ccountry").focus();return false}else{if(!ValidURL($("#curl").val())&&$("#curl").val()!=""){$("#curl").html(t("Please insert a valid url."));$("#curl").focus();return false}else{$("#FormResult").html("");return true}}}}}}}}}}}}function checkvalue(a){var b=a.attr("id");var c=a.attr("name");var d=$("#"+b).val();$.ajax({url:ReturnLink("/ajax/ajax_ch_register.php"),data:{ThisName:c,ThisValue:d,flag:"focus"},type:"post",success:function(e){var g=null;try{g=$.parseJSON(e)}catch(f){}if(g.error){throwChaError=1;$("#CFormResult").html(g.error);$("#"+b).addClass("Error")}else{throwChaError=0;$("#CFormResult").html("");$("#"+b).removeClass("Error");$("#"+b).removeClass("Focus")}}});$.ajax({url:ReturnLink("/ajax/ajax_check_country.php"),data:{country_code:d},type:"post",success:function(f){var h=null;try{h=$.parseJSON(f)}catch(g){}if(h.error){throwChaError=1;$("#CFormResult").html(h.error);$("#"+b).addClass("Error")}else{throwChaError=0;$("#CFormResult").html("");$("#"+b).removeClass("Error");$("#"+b).removeClass("Focus");var e=h.country;if(e==""){$("#czip").parent().hide();$("#czip_ttlogo").hide()}else{$("#czip").parent().show();$("#czip_ttlogo").show()}}}})}function clearForm(){$("#SEmailField").val("yourname@email.com");$("#SPasswordField").val("Your Password");$("#SEmailForgotForm").val("yourname@email.com")}function clearallfields(a){$("#"+a+" input").each(function(){if($(this).attr("name")!="gender"){$(this).val("")}});$("#"+a+" select").val("")}function checkDate(a){var b=a;var c=a.attr("name");var d=a.val();$.ajax({url:ReturnLink("/ajax/ajax_register.php"),data:{ThisName:c,ThisValue:d,flag:"focus"},type:"post",success:function(e){var g=null;try{g=$.parseJSON(e)}catch(f){}if(g.error){throwError=1;$("#FormResult").html(g.error);b.addClass("Error")}else{throwError=0;b.removeClass("Error");b.removeClass("Focus");$("#FormResult").html("")}}})}function addAutoCompleteList(b){var a=$("input[name=ccity]",$("#"+b));a.autocomplete({appendTo:"#CreateChannelForm",search:function(e,f){var c=$("#ccountry");var d=c.val();if(d=="ZZ"){c.addClass("err");e.preventDefault()}else{a.autocomplete("option","source",ReturnLink("/ajax/uploadGetCities.php?cc="+d))}},select:function(c,d){a.val(d.item.value);a.attr("data-id",d.item.id);c.preventDefault()}})}$(document).ready(function(){var b=0;var a=0;$(".signin").fancybox({padding:0,margin:0,onComplete:clearForm()});addAutoCompleteList("CreateChannelForm");$("#submitmailreq").click(function(){var c=getObjectData($("#req_email"));if(!emailIsValid(c)||c==""){TTAlert({msg:t("Please specify valid email address"),type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null});return}$.ajax({url:ReturnLink("/ajax/account_invite_request.php"),data:{email:c,name:""},type:"post",success:function(f){var e;try{e=$.parseJSON(f);$("#req_email").val("");$("#req_email").blur()}catch(d){return}if(!e){return}if(e.status=="ok"){TTAlert({msg:e.msg,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}else{TTAlert({msg:e.error,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}}})});if($("#YourBday").length>0){Calendar.setup({inputField:"YourBday",noScroll:true,trigger:"cal_icon",align:"B",onSelect:function(c){this.hide();checkDate($("#YourBday"))},dateFormat:"%d/%m/%Y"})}$(".bdate").focus(function(){$(this).addClass("Focus");$(this).removeClass("Error")});$(".RegFocus").each(function(){$(this).focus(function(){$(this).addClass("Focus");$(this).removeClass("Error")})});$(".RegUsernameBlur").blur(function(){var c=$(this);var d=$("#YourUserName").val();c.removeClass("Error");if(d==""){return}$.ajax({url:ReturnLink("/ajax/ajax_check_user.php"),data:{username:d},type:"post",success:function(e){var g=null;try{g=$.parseJSON(e)}catch(f){}if(g.data=="error"){$("#YourUserName").addClass("Error");TTAlert({msg:g.msg,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}}})});$("#CreateMyChannel").click(function(){if(ValidateCahnnelForm()){$("#ClaimChEmail").css("visibility","hidden");$(".upload-overlay-loading-fix").show();$.ajax({url:ReturnLink("/ajax/ajax_ch_register.php"),data:{oname:$("#ChRegisterF #oname").val(),cname:$("#ChRegisterF #cname").val(),cemail:$("#ChRegisterF #cemail").val(),cpassword:$("#ChRegisterF #cpassword").val(),ccpassword:$("#ChRegisterF #ccpassword").val(),ccategory:$("#ChRegisterF #ccategory").val(),ccountry:$("#ChRegisterF #ccountry").val(),czip:$("#ChRegisterF #czip").val(),ccity:$("#ChRegisterF #ccity").val(),ccityid:$("#ChRegisterF #ccity").attr("data-id"),cstreet:$("#ChRegisterF #cstreet").val(),cphone:$("#ChRegisterF #cphone").val(),curl:$("#ChRegisterF #curl").val()},type:"post",success:function(c){var g=null;try{g=$.parseJSON(c)}catch(d){$(".upload-overlay-loading-fix").hide();return}if(g.error){$(".upload-overlay-loading-fix").hide();$("#CFormResult").html(g.error);var e=g.fields;for(var f=0;f<e.length;f++){$("#"+e[f]).addClass("Error")}}else{$(".upload-overlay-loading-fix").hide();window.top.location.href=ReturnLink("register-success/channel")}}})}});$("#CreateMyAccount").click(function(){if(ValidateRegisterForm()){if($("#FormResult").html()==""){$("#ClaimEmail").css("visibility","hidden");$(".upload-overlay-loading-fix").show();$.ajax({url:ReturnLink("/ajax/ajax_register.php"),data:{fname:$("#RegisterF #fname").val(),lname:$("#RegisterF #lname").val(),YourEmail:$("#RegisterF #YourEmail").val(),YourUserName:$("#RegisterF #YourUserName").val(),YourPassword:$("#RegisterF #YourPassword").val(),YourCPassword:$("#RegisterF #YourCPassword").val(),YourBday:$("#RegisterF #YourBday").val(),gender:$("input[name=gender]:checked").val()},type:"post",success:function(c){var g=null;try{g=$.parseJSON(c)}catch(d){$(".upload-overlay-loading-fix").hide();return}if(g.error){$(".upload-overlay-loading-fix").hide();$("#FormResult").html(g.error);if(g.YourUserName){$("#YourUserName").val(g.YourUserName)}var e=g.fields;for(var f=0;f<e.length;f++){$("#"+e[f]).addClass("Error")}}else{$(".upload-overlay-loading-fix").hide();window.top.location.href=ReturnLink("register-success")}}})}}});$("#CreateMyAccountNew").click(function(){if(ValidateRegisterFormNew()){if($("#FormResult").html()==""){$("#ClaimEmail").css("visibility","hidden");$(".upload-overlay-loading-fix").show();$.ajax({url:ReturnLink("/ajax/ajax_register.php"),data:{fname:$("#RegisterF #YourUserName").val(),lname:"",YourEmail:$("#RegisterF #YourEmail").val(),YourUserName:$("#RegisterF #YourUserName").val(),YourPassword:$("#RegisterF #YourPassword").val(),YourCPassword:$("#RegisterF #YourCPassword").val(),YourBday:"0000-00-00",gender:"O",register_type:"popup"},type:"post",success:function(c){var g=null;try{g=$.parseJSON(c)}catch(d){$(".upload-overlay-loading-fix").hide();return}if(g.error){$(".upload-overlay-loading-fix").hide();$("#FormResult").html(g.error);if(g.YourUserName){$("#YourUserName").val(g.YourUserName)}var e=g.fields;for(var f=0;f<e.length;f++){$("#"+e[f]).addClass("Error")}}else{$(".upload-overlay-loading-fix").hide();window.top.location.href=ReturnLink("register-success")}}})}}});$(".registerpopUp input").focus(function(){$(this).val("")});$("#signInbtn").live("click",function(){var d=$("#SEmailField").val();var e=$("#SPasswordField").val();$("#SPasswordField, #SEmailField").removeClass("InputErr");if(d==""||d=="yourname@email.com"||!(d.match(/([\<])([^\>]{1,})*([\>])/i)==null)){$("#SEmailField").focus().addClass("InputErr");return false}else{if(e==""||e=="Your Password"||!(e.match(/([\<])([^\>]{1,})*([\>])/i)==null)){$("#SPasswordField").focus().addClass("InputErr");return false}else{var c="EmailField="+d+"&PasswordField="+e;$.cookie("remember_me_name",$("#SEmailField").val(),{path:"/"});$.cookie("remember_me_pass",$("#SPasswordField").val(),{path:"/"});$.ajax({type:"POST",url:ReturnLink("/ajax/process.php"),data:c,success:function(f){CloseFancyBox();var h;try{h=$.parseJSON(f)}catch(g){return}var i=$("#InsideNormal .selected").attr("id");clearForm();if(h.status=="ok"){$.fancybox.close();window.top.location.href=ReturnLink("register/"+i)}else{TTAlert({msg:t("Invalid login, please try again"),type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}}});return true}}});$("#resetbtn").live("click",function(d){var f=$("#SEmailForgotForm").val();$("#SEmailForgotForm").removeClass("InputErr");if(f==""||f=="yourname@email.com"||!(f.match(/([\<])([^\>]{1,})*([\>])/i)==null)){$("#SEmailForgotForm").focus().addClass("InputErr")}else{var c="EmailForgotForm="+f;$.ajax({type:"POST",url:ReturnLink("/ajax/passprocess.php"),data:c,success:function(g){clearForm();var h;try{h=$.parseJSON(g)}catch(e){return}if(!h){return}if(h.status=="ok"){$.fancybox.close();ShowClaimdiv(t("an email is sent to you to reset your password"))}else{TTAlert({msg:t("Invalid email, please try again"),type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}}})}});$("#ccountry").change(function(){var c=$("#ccountry").val();$.ajax({url:ReturnLink("/ajax/ajax_check_country.php"),data:{country_code:c},type:"post",success:function(e){var g=null;try{g=$.parseJSON(e)}catch(f){}if(g.error){a=1;$("#CFormResult").html(g.error)}else{a=0;$("#CFormResult").html("");var d=g.country;$("#czip").removeClass("Error");if(d==""){$("#czip").parent().hide();$("#czip_ttlogo").hide()}else{$("#czip").parent().show();$("#czip_ttlogo").show()}}}})});$("#czip").blur(function(){var d=$("#czip").val();var c=$("#ccountry").val();if(d==""||c=="0"){return}$.ajax({url:ReturnLink("/ajax/ajax_check_zip.php"),data:{zip_code:d,country_code:c},type:"post",success:function(f){var h=null;try{h=$.parseJSON(f)}catch(g){}if(h.error){b=1;$("#FormResult").html(h.error);$("#czip").addClass("Error")}else{var e=h.city;if(e!=""){$("#czip").removeClass("Error");$("#ccity").val(e);$("#CFormResult").html("")}else{$("#czip").addClass("Error");$("#ccity").val("");TTAlert({msg:$.i18n._("Zip code is incorrect"),type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null})}}}})})});function checkSubmitsignInbtn(a){if(a&&a.keyCode==13){$("#signInbtn").click()}}function checkCalValue(a){if(!isNumberWithSeperator(a)){return false}return true}function isNumberWithSeperator(b){var a=(b.which)?b.which:b.keyCode;if(a==47||a==45){return true}if(a>31&&(a<48||a>57)){return false}return true}function isDateCheck(b){var a;if(toString.call(b)==="[object Date]"){return true}if(typeof b.replace==="function"){b.replace(/^\s+|\s+$/gm,"")}a=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/;return a.test(b)}function checkSubmitRegister(a){if(a&&a.keyCode==13){$("#submitmailreq").click()}};