var __slice=[].slice,__indexOf=[].indexOf||function(a){for(var c=0,b=this.length;c<b;c++){if(c in this&&this[c]===a){return c}}return -1};(function(a,c){var b;return b=function(){function d(h,f){var g,e=this;this.input=h,this.defaultOptions={animate:!0,snapMid:!1,classPrefix:null,classSuffix:null,theme:null,highlight:!1},this.settings=a.extend({},this.defaultOptions,f),this.settings.theme&&(this.settings.classSuffix="-"+this.settings.theme),this.input.hide(),this.slider=a("<div>").addClass("slider"+(this.settings.classSuffix||"")).css({position:"relative",userSelect:"none",boxSizing:"border-box"}).insertBefore(this.input),this.input.attr("id")&&this.slider.attr("id",this.input.attr("id")+"-slider"),this.track=this.createDivElement("track").css({width:"100%"}),this.settings.highlight&&(this.highlightTrack=this.createDivElement("highlight-track").css({width:"0"})),this.dragger=this.createDivElement("dragger"),this.slider.css({minHeight:this.dragger.outerHeight(),marginLeft:this.dragger.outerWidth()/2,marginRight:this.dragger.outerWidth()/2}),this.track.css({marginTop:this.track.outerHeight()/-2}),this.settings.highlight&&this.highlightTrack.css({marginTop:this.track.outerHeight()/-2}),this.dragger.css({marginTop:this.dragger.outerWidth()/-2,marginLeft:this.dragger.outerWidth()/-2}),this.track.mousedown(function(i){return e.trackEvent(i)}),this.settings.highlight&&this.highlightTrack.mousedown(function(i){return e.trackEvent(i)}),this.dragger.mousedown(function(i){if(i.which!==1){return}return e.dragging=!0,e.dragger.addClass("dragging"),e.domDrag(i.pageX,i.pageY),!1}),a("body").mousemove(function(i){if(e.dragging){return e.domDrag(i.pageX,i.pageY),a("body").css({cursor:"pointer"})}}).mouseup(function(i){if(e.dragging){return e.dragging=!1,e.dragger.removeClass("dragging"),a("body").css({cursor:"auto"})}}),this.pagePos=0,this.input.val()===""?(this.value=this.getRange().min,this.input.val(this.value)):this.value=this.nearestValidValue(this.input.val()),this.setSliderPositionFromValue(this.value),g=this.valueToRatio(this.value),this.input.trigger("slider:ready",{value:this.value,ratio:g,position:g*this.slider.outerWidth(),el:this.slider})}return d.prototype.createDivElement=function(f){var e;return e=a("<div>").addClass(f).css({position:"absolute",top:"50%",userSelect:"none",cursor:"pointer"}).appendTo(this.slider),e},d.prototype.setRatio=function(f){var g;return f=Math.min(1,f),f=Math.max(0,f),g=this.ratioToValue(f),this.setSliderPositionFromValue(g),this.valueChanged(g,f,"setRatio")},d.prototype.setValue=function(f){var g;return f=this.nearestValidValue(f),g=this.valueToRatio(f),this.setSliderPositionFromValue(f),this.valueChanged(f,g,"setValue")},d.prototype.trackEvent=function(f){if(f.which!==1){return}return this.domDrag(f.pageX,f.pageY,!0),this.dragging=!0,!1},d.prototype.domDrag=function(f,l,h){var j,g,k;h==null&&(h=!1),j=f-this.slider.offset().left,j=Math.min(this.slider.outerWidth(),j),j=Math.max(0,j);if(this.pagePos!==j){return this.pagePos=j,g=j/this.slider.outerWidth(),k=this.ratioToValue(g),this.valueChanged(k,g,"domDrag"),this.settings.snap?this.setSliderPositionFromValue(k,h):this.setSliderPosition(j,h)}},d.prototype.setSliderPosition=function(f,g){g==null&&(g=!1);if(g&&this.settings.animate){this.dragger.animate({left:f},200);if(this.settings.highlight){return this.highlightTrack.animate({width:f},200)}}else{this.dragger.css({left:f});if(this.settings.highlight){return this.highlightTrack.css({width:f})}}},d.prototype.setSliderPositionFromValue=function(f,h){var g;return h==null&&(h=!1),g=this.valueToRatio(f),this.setSliderPosition(g*this.slider.outerWidth(),h)},d.prototype.getRange=function(){return this.settings.allowedValues?{min:Math.min.apply(Math,this.settings.allowedValues),max:Math.max.apply(Math,this.settings.allowedValues)}:this.settings.range?{min:parseFloat(this.settings.range[0]),max:parseFloat(this.settings.range[1])}:{min:0,max:1}},d.prototype.nearestValidValue=function(j){var f,g,e,h;return e=this.getRange(),j=Math.min(e.max,j),j=Math.max(e.min,j),this.settings.allowedValues?(f=null,a.each(this.settings.allowedValues,function(){if(f===null||Math.abs(this-j)<Math.abs(f-j)){return f=this}}),f):this.settings.step?(g=(e.max-e.min)/this.settings.step,h=Math.floor((j-e.min)/this.settings.step),(j-e.min)%this.settings.step>this.settings.step/2&&h<g&&(h+=1),h*this.settings.step+e.min):j},d.prototype.valueToRatio=function(g){var p,j,l,h,m,k,q,f;if(this.settings.equalSteps){f=this.settings.allowedValues;for(h=k=0,q=f.length;k<q;h=++k){p=f[h];if(typeof j=="undefined"||j===null||Math.abs(p-g)<Math.abs(j-g)){j=p,l=h}}return this.settings.snapMid?(l+0.5)/this.settings.allowedValues.length:l/(this.settings.allowedValues.length-1)}return m=this.getRange(),(g-m.min)/(m.max-m.min)},d.prototype.ratioToValue=function(f){var l,h,j,g,k;return this.settings.equalSteps?(k=this.settings.allowedValues.length,g=Math.round(f*k-0.5),l=Math.min(g,this.settings.allowedValues.length-1),this.settings.allowedValues[l]):(h=this.getRange(),j=f*(h.max-h.min)+h.min,this.nearestValidValue(j))},d.prototype.valueChanged=function(h,f,g){var e;if(h.toString()===this.value.toString()){return}return this.value=h,e={value:h,ratio:f,position:f*this.slider.outerWidth(),trigger:g,el:this.slider},this.input.val(h).trigger(a.Event("change",e)).trigger("slider:changed",e)},d}(),a.extend(a.fn,{simpleSlider:function(){var f,e,d;return d=arguments[0],f=2<=arguments.length?__slice.call(arguments,1):[],e=["setRatio","setValue"],a(this).each(function(){var h,g;return d&&__indexOf.call(e,d)>=0?(h=a(this).data("slider-object"),h[d].apply(h,f)):(g=d,a(this).data("slider-object",new b(a(this),g)))})}}),a(function(){return a("[data-slider]").each(function(){var g,e,f,d;return g=a(this),f={},e=g.data("slider-values"),e&&(f.allowedValues=function(){var h,k,i,j;i=e.split(","),j=[];for(h=0,k=i.length;h<k;h++){d=i[h],j.push(parseFloat(d))}return j}()),g.data("slider-range")&&(f.range=g.data("slider-range").split(",")),g.data("slider-step")&&(f.step=g.data("slider-step")),f.snap=g.data("slider-snap"),f.equalSteps=g.data("slider-equal-steps"),g.data("slider-theme")&&(f.theme=g.data("slider-theme")),g.attr("data-slider-highlight")&&(f.highlight=g.data("slider-highlight")),g.data("slider-animate")!=null&&(f.animate=g.data("slider-animate")),g.simpleSlider(f)})})})(this.jQuery||this.Zepto,this);