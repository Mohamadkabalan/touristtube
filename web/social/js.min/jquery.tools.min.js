/*
 * jQuery Tools v1.2.7 - The missing UI library for the Web
 * 
 * overlay/overlay.js
 * toolbox/toolbox.flashembed.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
(function(e){e.tools=e.tools||{version:"v1.2.7"},e.tools.overlay={addEffect:function(c,i,j){g[c]=[i,j]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!e.browser.msie||e.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var f=[],g={};e.tools.overlay.addEffect("default",function(a,i){var j=this.getConf(),k=e(window);j.fixed||(a.top+=k.scrollTop(),a.left+=k.scrollLeft()),a.position=j.fixed?"fixed":"absolute",this.getOverlay().css(a).fadeIn(j.speed,i)},function(b){this.getOverlay().fadeOut(this.getConf().closeSpeed,b)});function h(a,b){var c=this,o=a.add(c),p=e(window),q,r,s,t=e.tools.expose&&(b.mask||b.expose),u=Math.random().toString().slice(10);t&&(typeof t=="string"&&(t={color:t}),t.closeOnClick=t.closeOnEsc=!1);var v=b.target||a.attr("rel");r=v?e(v):null||a;if(!r.length){throw"Could not find Overlay: "+v}a&&a.index(r)==-1&&a.click(function(d){c.load(d);return d.preventDefault()}),e.extend(c,{load:function(j){if(c.isOpened()){return c}var k=g[b.effect];if(!k){throw'Overlay: cannot find effect : "'+b.effect+'"'}b.oneInstance&&e.each(f,function(){this.close(j)}),j=j||e.Event(),j.type="onBeforeLoad",o.trigger(j);if(j.isDefaultPrevented()){return c}s=!0,t&&e(r).expose(t);var l=b.top,m=b.left,w=r.outerWidth({margin:!0}),x=r.outerHeight({margin:!0});typeof l=="string"&&(l=l=="center"?Math.max((p.height()-x)/2,0):parseInt(l,10)/100*p.height()),m=="center"&&(m=Math.max((p.width()-w)/2,0)),k[0].call(c,{top:l,left:m},function(){s&&(j.type="onLoad",o.trigger(j))}),t&&b.closeOnClick&&e.mask.getMask().one("click",c.close),b.closeOnClick&&e(document).on("click."+u,function(d){e(d.target).parents(r).length||c.close(d)}),b.closeOnEsc&&e(document).on("keydown."+u,function(d){d.keyCode==27&&c.close(d)});return c},close:function(d){if(!c.isOpened()){return c}d=d||e.Event(),d.type="onBeforeClose",o.trigger(d);if(!d.isDefaultPrevented()){s=!1,g[b.effect][1].call(c,function(){d.type="onClose",o.trigger(d)}),e(document).off("click."+u+" keydown."+u),t&&e.mask.close();return c}},getOverlay:function(){return r},getTrigger:function(){return a},getClosers:function(){return q},isOpened:function(){return s},getConf:function(){return b}}),e.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(d,i){e.isFunction(b[i])&&e(c).on(i,b[i]),c[i]=function(j){j&&e(c).on(i,j);return c}}),q=r.find(b.close||".close"),!q.length&&!b.close&&(q=e('<a class="close"></a>'),r.prepend(q)),q.click(function(d){c.close(d)}),b.load&&c.load()}e.fn.overlay=function(a){var b=this.data("overlay");if(b){return b}e.isFunction(a)&&(a={onBeforeLoad:a}),a=e.extend(!0,{},e.tools.overlay.conf,a),this.each(function(){b=new h(e(this),a),f.push(b),e(this).data("overlay",b)});return a.api?b:this}})(jQuery);(function(){var k=document.all,l="http://www.adobe.com/go/getflashplayer",m=typeof jQuery=="function",n=/(\d+)[^\d]+(\d+)[^\d]*(\d*)/,o={width:"100%",height:"100%",id:"_"+(""+Math.random()).slice(9),allowfullscreen:!0,allowscriptaccess:"always",quality:"high",version:[3,0],onFail:null,expressInstall:null,w3c:!1,cachebusting:!1};window.attachEvent&&window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){}});function p(d,e){if(e){for(var f in e){e.hasOwnProperty(f)&&(d[f]=e[f])}}return d}function q(e,f){var g=[];for(var h in e){e.hasOwnProperty(h)&&(g[h]=f(e[h]))}return g}window.flashembed=function(d,e,f){typeof d=="string"&&(d=document.getElementById(d.replace("#","")));if(d){typeof e=="string"&&(e={src:e});return new t(d,p(p({},o),e),f)}};var r=p(window.flashembed,{conf:o,getVersion:function(){var d,g;try{g=navigator.plugins["Shockwave Flash"].description.slice(16)}catch(h){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),g=d&&d.GetVariable("$version")}catch(i){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),g=d&&d.GetVariable("$version")}catch(j){}}}g=n.exec(g);return g?[g[1],g[3]]:[0,0]},asString:function(e){if(e===null||e===undefined){return null}var f=typeof e;f=="object"&&e.push&&(f="array");switch(f){case"string":e=e.replace(new RegExp('(["\\\\])',"g"),"\\$1"),e=e.replace(/^\s?(\d+\.?\d*)%/,"$1pct");return'"'+e+'"';case"array":return"["+q(e,function(b){return r.asString(b)}).join(",")+"]";case"function":return'"function()"';case"object":var g=[];for(var h in e){e.hasOwnProperty(h)&&g.push('"'+h+'":'+r.asString(e[h]))}return"{"+g.join(",")+"}"}return String(e).replace(/\s/g," ").replace(/\'/g,'"')},getHTML:function(a,f){a=p({},a);var h='<object width="'+a.width+'" height="'+a.height+'" id="'+a.id+'" name="'+a.id+'"';a.cachebusting&&(a.src+=(a.src.indexOf("?")!=-1?"&":"?")+Math.random()),a.w3c||!k?h+=' data="'+a.src+'" type="application/x-shockwave-flash"':h+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',h+=">";if(a.w3c||k){h+='<param name="movie" value="'+a.src+'" />'}a.width=a.height=a.id=a.w3c=a.src=null,a.onFail=a.version=a.expressInstall=null;for(var u in a){a[u]&&(h+='<param name="'+u+'" value="'+a[u]+'" />')}var v="";if(f){for(var w in f){if(f[w]){var x=f[w];v+=w+"="+encodeURIComponent(/function|object/.test(typeof x)?r.asString(x):x)+"&"}}v=v.slice(0,-1),h+='<param name="flashvars" value=\''+v+"' />"}h+="</object>";return h},isSupported:function(b){return s[0]>b[0]||s[0]==b[0]&&s[1]>=b[1]}}),s=r.getVersion();function t(a,b,f){if(r.isSupported(b.version)){a.innerHTML=r.getHTML(b,f)}else{if(b.expressInstall&&r.isSupported([6,65])){a.innerHTML=r.getHTML(p(b,{src:b.expressInstall}),{MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title})}else{a.innerHTML.replace(/\s/g,"")||(a.innerHTML="<h2>Flash version "+b.version+" or greater is required</h2><h3>"+(s[0]>0?"Your version is "+s:"You have no flash plugin installed")+"</h3>"+(a.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='"+l+"'>here</a></p>"),a.tagName=="A"&&(a.onclick=function(){location.href=l}));if(b.onFail){var h=b.onFail.call(this);typeof h=="string"&&(a.innerHTML=h)}}}k&&(window[b.id]=document.getElementById(b.id)),p(this,{getRoot:function(){return a},getOptions:function(){return b},getConf:function(){return f},getApi:function(){return a.firstChild}})}m&&(jQuery.tools=jQuery.tools||{version:"v1.2.7"},jQuery.tools.flashembed={conf:o},jQuery.fn.flashembed=function(c,d){return this.each(function(){jQuery(this).data("flashembed",flashembed(this,c,d))})})})();