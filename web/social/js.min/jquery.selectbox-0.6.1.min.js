jQuery.fn.selectbox=function(e){var f={className:"jquery-selectbox",animationSpeed:"fast",listboxMaxSize:13,replaceInvisible:false};var a="jquery-custom-selectboxes-replaced";var c=false;var g=function(h){var i=h.parents("."+f.className+"");h.slideDown(f.animationSpeed,function(){c=true});i.addClass("selecthover");jQuery(document).bind("click",d);return h};var b=function(h){var i=h.parents("."+f.className+"");h.slideUp(f.animationSpeed,function(){c=false;jQuery(this).parents("."+f.className+"").removeClass("selecthover")});jQuery(document).unbind("click",d);return h};var d=function(i){var j=i.target;var h=jQuery("."+f.className+"-list:visible").parent().find("*").andSelf();if(jQuery.inArray(j,h)<0&&c){b(jQuery("."+a+"-list"))}};f=jQuery.extend(f,e||{});return this.each(function(){var h=jQuery(this);if(h.filter(":visible").length==0&&!f.replaceInvisible){return}var i=jQuery('<div class="'+f.className+" "+a+'"><div class="'+f.className+'-moreButton" /><div class="'+f.className+"-list "+a+'-list" /><span class="'+f.className+'-currentItem" /></div>');jQuery("option",h).each(function(m,o){var o=jQuery(o);var n=jQuery('<span class="'+f.className+"-item value-"+o.val()+" item-"+m+'">'+o.text()+"</span>");n.click(function(){var q=jQuery(this);var r=q.parents("."+f.className);var p=q[0].className.split(" ");for(k1 in p){if(/^item-[0-9]+$/.test(p[k1])){p=parseInt(p[k1].replace("item-",""),10);break}}var t=q[0].className.split(" ");for(k1 in t){if(/^value-.+$/.test(t[k1])){t=t[k1].replace("value-","");break}}r.find("."+f.className+"-currentItem").text(q.text());r.find("select").val(t).triggerHandler("change");var s=r.find("."+f.className+"-list");if(s.filter(":visible").length>0){b(s)}else{g(s)}}).bind("mouseenter",function(){jQuery(this).addClass("listelementhover")}).bind("mouseleave",function(){jQuery(this).removeClass("listelementhover")});jQuery("."+f.className+"-list",i).append(n);if(o.filter(":selected").length>0){jQuery("."+f.className+"-currentItem",i).text(o.text())}});i.find("."+f.className+"-moreButton").click(function(){var o=jQuery(this);var m=jQuery("."+f.className+"-list").not(o.siblings("."+f.className+"-list"));b(m);var n=o.siblings("."+f.className+"-list");if(n.filter(":visible").length>0){b(n)}else{g(n)}}).bind("mouseenter",function(){jQuery(this).addClass("morebuttonhover")}).bind("mouseleave",function(){jQuery(this).removeClass("morebuttonhover")});i.find("."+f.className+"-currentItem").click(function(){var o=jQuery(this);var m=jQuery("."+f.className+"-list").not(o.siblings("."+f.className+"-list"));b(m);var n=o.siblings("."+f.className+"-list");if(n.filter(":visible").length>0){b(n)}else{g(n)}}).bind("mouseenter",function(){jQuery(this).addClass("morebuttonhover")}).bind("mouseleave",function(){jQuery(this).removeClass("morebuttonhover")});h.hide().replaceWith(i).appendTo(i);var j=i.find("."+f.className+"-list");var k=j.find("."+f.className+"-item").length;if(k>f.listboxMaxSize){k=f.listboxMaxSize}if(k==0){k=1}var l=Math.round(h.width()+2);i.css("width",l+"px");j.css({width:Math.round(l)+"px"})})};jQuery.fn.unselectbox=function(){var a="jquery-custom-selectboxes-replaced";return this.each(function(){var b=jQuery(this).filter("."+a);b.replaceWith(b.find("select").show())})};