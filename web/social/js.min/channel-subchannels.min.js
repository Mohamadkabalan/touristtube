var contwidth=952;var spacecontwidth=243;var maxwidth=0;var lastleft=0;var theleft=0;$(document).ready(function(){maxwidth=parseInt($(".subchannel_inside").css("width"));lastleft=maxwidth-contwidth;theleft=parseInt($(".subchannel_inside").css("left"));initItemList();reintialiseslider();initscrollPaneSubChannel($(".subchannel_item0"),false);$(document).on("click",".sub_items_not",function(){var b=$(this);var a=b.closest(".sub_items");if(parseInt(b.attr("data-notification"))==1){b.html(t("get notifications"));b.attr("data-notification",0);updateNotificationDataCH(a,"stopNotifications")}else{b.html(t("stop notifications"));b.attr("data-notification",1);updateNotificationDataCH(a,"getNotifications")}});$(document).on("click",".next_media_page",function(){if($(this).hasClass("inactive")){return}maxwidth=parseInt($(".subchannel_inside").css("width"));lastleft=maxwidth-contwidth;var a=0;if(theleft<=-lastleft){a=-lastleft}else{if((theleft-spacecontwidth)<=-lastleft){a=-lastleft}else{a=theleft-spacecontwidth}}$(".prev_media_page").removeClass("inactive");if((a-contwidth-30)<=-maxwidth){a=-lastleft;$(".next_media_page").addClass("inactive")}$(".subchannel_inside").stop().animate({left:a},"6000");theleft=a});$(document).on("click",".prev_media_page",function(){if($(this).hasClass("inactive")){return}maxwidth=parseInt($(".subchannel_inside").css("width"));lastleft=maxwidth-contwidth;var a=0;if(theleft>=0){a=0}else{if((theleft+spacecontwidth)>=0){a=0}else{a=theleft+spacecontwidth}}$(".next_media_page").removeClass("inactive");if(a>=-30){a=0;$(".prev_media_page").addClass("inactive")}$(".subchannel_inside").stop().animate({left:a},"6000");theleft=a});$(document).on("click",".go_sub_items_but",function(){var a=$(this).closest(".sub_items");var b=a.attr("data-id");var c=a.closest(".subchannel_curent").attr("data-level");$(".upload-overlay-loading-fix").show();$.ajax({type:"POST",url:ReturnLink("/ajax/channel_sub_list.php"),data:{id:b,data_level:c,parent_id:channelGlobalID()},success:function(e){$(".upload-overlay-loading-fix").hide();var h=null;try{h=$.parseJSON(e)}catch(d){return}a.closest(".subchannel_curent").find(".sub_items").removeClass("active");a.addClass("active");var g=parseInt(h.data_level);$(".subchannel_curent").each(function(){var j=$(this);var k=parseInt(j.attr("data-level"));if(k>=g){j.remove()}});$(".subchannel_inside").append(h.data);var i=($(".subchannel_levels").length*243)+223;$(".subchannel_inside").css("width",i+"px");var f=0;if(i>952){f=-(i-952);$(".next_media_page").addClass("inactive");$(".prev_media_page").removeClass("inactive");$(".prev_next_container").show()}else{$(".prev_next_container").hide()}$(".subchannel_inside").css("left",f+"px");theleft=parseInt($(".subchannel_inside").css("left"));initscrollPaneSubChannel($("#subchannel_levels_content"+h.data_level),false)}})});$(document).on("click",".hide_sub_items_but",function(){var a=$(this).closest(".sub_items");var c=a.attr("data-id");var b="<b>"+a.find(".sub_items_title").attr("title")+"</b>";TTAlert({msg:sprintf(t("Are you sure you want to remove the subchannel %s ?"),[b]),type:"action",btn1:t("cancel"),btn2:t("confirm"),btn2Callback:function(d){if(d){$(".upload-overlay-loading-fix").show();TTCallAPI({what:"channel/relation/delete",data:{parent_id:channelGlobalID(),channel_id:c,relation_type:CHANNEL_RELATION_TYPE_SUB},callback:function(e){$(".upload-overlay-loading-fix").hide();if(e.status==="error"){TTAlert({msg:e.msg,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null});return}document.location.reload()}})}}})})});function checkSubmitSearch(a){if(a&&a.keyCode==13){$(".searchBtn_events").click()}}function initItemList(){$(".itemList").each(function(){var a=$(this);a.on("mouseenter",function(){a.find(".hideDivClass").show();a.find(".itemList_right_buttons").show()}).on("mouseleave",function(){a.find(".hideDivClass").hide();a.find(".itemList_right_buttons").hide()})})}function initscrollPaneSubChannel(d,a){try{if((parseInt(d.height())-3)>d.css("min-height").replace("px","")){d.css("max-height",d.css("min-height"));d.jScrollPane();if(a){var c=d.data("jsp");c.scrollToBottom(true)}}}catch(b){d.css("max-height",d.css("min-height"));d.jScrollPane();if(a){try{var c=d.data("jsp");c.scrollToBottom(true)}catch(b){}}}}function updateNotificationDataCH(c,a){var b=c.attr("data-id");$(".upload-overlay-loading-fix").show();$.ajax({url:ReturnLink("/ajax/info_not_relation_update.php"),data:{action:a,channel_id:b,parent_id:channelGlobalID()},type:"post",success:function(d){$(".upload-overlay-loading-fix").hide()}})};