(function(a){a.fn.preloader=function(){var g=new Array();var d=new Array();this.each(function(){var i=a(this);i.find("img").each(function(j,k){if(a(this).data("preloaded")){return}a(this).data("preloaded",true);a(this).css({visibility:"hidden",opacity:0});if(a(this).parent("a").length==0){a(this).wrap("<a class='preloader added' />")}else{a(this).parent().addClass("preloader")}g.push(a(this));d.push(false)})});var b=jQuery("<img />",{id:"loadingicon",src:ReturnLink("/css/fancybox_loading2.gif"),width:"16",height:"16"}).hide().appendTo("body");var f=0;var h;var e=function(){if(b.get(0).complete!=true){return}var l=false;for(var k=0;k<g.length;k++){if((g[k].get(0).complete==true)&&(d[k]==false)){var j=g[k];g[k].css("visibility","visible").animate({opacity:1},250,function(){if(a(this).parent().hasClass("added")){a(this).unwrap()}else{a(this).parent().removeClass("preloader")}});d[k]=true}if(d[k]==false){l=true}}if(l==false){clearInterval(h);b.remove()}};h=setInterval(e,500);var c=1}})(jQuery);