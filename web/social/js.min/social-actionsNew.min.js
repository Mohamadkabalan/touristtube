var currentpage_like=0;var currentpage_rates=0;var currentpage_comments=0;var currentpage_replies=0;var currentpage_reechoes=0;var currentpage_shares=0;var currentpage_sponsors=0;var currentpage_userjoin=0;function initSocialActions(){$(document).on("click",".socialButtons",function(){var b=$(this);var a=b.closest(".social_data_all");if($(this).hasClass("opacity0")){return}if(!b.hasClass("active")){var c="";if(b.hasClass("likes")){c="likes"}else{if(b.hasClass("comments")){c="comments"}else{if(b.hasClass("shares")){c="shares"}}}a.find(".socialButtons").removeClass("active");a.find(".socialInitDiv").hide();if($("."+c+"Div")){a.find("."+c+"Div").show()}b.addClass("active")}})}function initLikes(a){currentpage_like=0;a.attr("data-page-like",0);$.ajax({url:"/ajax/ajax_all_likes",data:{entity_type:a.attr("data-type"),entity_id:a.attr("data-id"),page:0,channelid:channelGlobalID()},type:"post",cache:false,success:function(b){var i=null;try{i=$.parseJSON(b)}catch(d){return}if(i.error){TTAlert({msg:i.error,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null});return}else{var g=i.data;var c=parseInt(i.count);var e=i.is_liked;a.find(".likesDiv .containerDiv").html("");a.find(".likesDiv .containerDiv").html('<div class="commentsAll max_height412"><div class="commentsAll_inside">'+g+"</div></div>");a.find(".likesNumber").html(c);$(".sortlikes").html(c);if(e==1){a.find(".likeDiv").attr("data-action","unlike");a.find(".likeDiv").html("<span> "+t("unlike")+"</span>");a.find(".likeDiv").addClass("active")}else{a.find(".likeDiv").attr("data-action","like");a.find(".likeDiv").html("<span> "+t("like")+"</span>");a.find(".likeDiv").removeClass("active")}if(c<=7){a.find(".likesDiv .showMore_like").hide()}else{a.find(".likesDiv .showMore_like").show()}a.find(".likesDiv .commentsAll").addClass("scrollpane_likes");var f=a.closest(".log_item_list");if(f.find(".news_count_l").length>0){var h=c;if(h>1||h==0){f.find(".news_count_l").html(h+" "+t("likes"))}else{f.find(".news_count_l").html(h+" "+t("like"))}}}}})}function initComments(a){currentpage_comments=0;a.attr("data-page-comments",0);$.ajax({url:ReturnLink("/ajax/ajax_all_comments_channel_media.php?no_cache="+Math.random()),data:{media:a.attr("data-type"),mediaid:a.attr("data-id"),page:0,globchannelid:channelGlobalID(),pagename:pagename},type:"post",cache:false,success:function(b){var f=null;try{f=$.parseJSON(b)}catch(d){return}if(f.error){TTAlert({msg:f.error,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null});return}else{var e=f.data;var c=f.count;a.find(".commentsDiv .containerDiv").html("");a.find(".commentsDiv .containerDiv").html('<div class="commentsAll max_height412"><div class="commentsAll_inside">'+e+"</div></div>");a.find(".commentsNumber").html(c);$(".sortcomments").html(c);if(c<=5){a.find(".commentsDiv .showMore_comments").hide()}else{a.find(".commentsDiv .showMore_comments").show()}a.find(".commentsDiv .commentsAll").addClass("scrollpane_comments");initLikersDataComments()}}})}function initShares(a){var c="max_height412";var b=7;if(parseInt(user_Is_channel)==0&&parseInt(user_is_logged)==1){c="max_height221";b=4}if(a.find(".sharesDiv #share_select1").length>0||a.find(".sharesDiv #share_select").length==0){c="max_height412";b=7}currentpage_shares=0;a.attr("data-page-shares",0);$.ajax({url:ReturnLink("/ajax/ajax_all_shares_channel_media.php?no_cache="+Math.random()),data:{media:a.attr("data-type"),mediaid:a.attr("data-id"),page:0,globchannelid:channelGlobalID(),mylimit:b},type:"post",cache:false,success:function(d){var i=null;try{i=$.parseJSON(d)}catch(f){return}if(i.error){TTAlert({msg:i.error,type:"alert",btn1:t("ok"),btn2:"",btn2Callback:null});return}else{var h=i.data;var e=i.count;a.find(".sharesDiv .containerDiv").html("");a.find(".sharesDiv .containerDiv").html('<div class="commentsAll '+c+'"><div class="commentsAll_inside">'+h+"</div></div>");a.find(".sharesNumber").html(e);$(".sortshares").html(e);var g=a.closest(".log_item_list");if(g.find(".news_count_s").length>0){if(e>1||e==0){g.find(".news_count_s").html(e+" "+t("shares"))}else{g.find(".news_count_s").html(e+" "+t("share"))}}if(e<=b){a.find(".sharesDiv .showMore_shares").hide()}else{currentpage_shares=parseInt(a.attr("data-page-shares"));if((currentpage_shares+1)*b>=e){a.find(".sharesDiv .showMore_shares").hide()}else{a.find(".sharesDiv .showMore_shares").show()}}a.find(".sharesDiv .commentsAll").addClass("scrollpane_shares");initLikersDataShares()}}})};