(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false}};a.fn.tinyscrollbar=function(d){var c=a.extend({},a.tiny.scrollbar.options,d);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(q,j){var l=this,p=q,o={obj:a(".viewport",q)},i={obj:a(".overview",q)},k={obj:a(".scrollbar",q)},n={obj:a(".track",k.obj)},m={obj:a(".thumb",k.obj)},r=j.axis==="x",s=r?"left":"top",v=r?"Width":"Height",h=0,g={start:0,now:0},e={},x="ontouchstart" in document.documentElement;function f(){l.update();t();return l}this.update=function(y){o[j.axis]=o.obj[0]["offset"+v];i[j.axis]=i.obj[0]["scroll"+v];i.ratio=o[j.axis]/i[j.axis];k.obj.toggleClass("disable",i.ratio>=1);n[j.axis]=j.size==="auto"?o[j.axis]:j.size;m[j.axis]=Math.min(n[j.axis],Math.max(0,(j.sizethumb==="auto"?(n[j.axis]*i.ratio):j.sizethumb)));k.ratio=j.sizethumb==="auto"?(i[j.axis]/n[j.axis]):(i[j.axis]-o[j.axis])/(n[j.axis]-m[j.axis]);h=(y==="relative"&&i.ratio<=1)?Math.min((i[j.axis]-o[j.axis]),Math.max(0,h)):0;h=(y==="bottom"&&i.ratio<=1)?(i[j.axis]-o[j.axis]):isNaN(parseInt(y,10))?h:parseInt(y,10);u()};function u(){var y=v.toLowerCase();m.obj.css(s,h/k.ratio);i.obj.css(s,-h);e.start=m.obj.offset()[s];k.obj.css(y,n[j.axis]);n.obj.css(y,n[j.axis])}function t(){if(!x){m.obj.bind("mousedown",w);n.obj.bind("mouseup",c)}else{o.obj[0].ontouchstart=function(y){if(1===y.touches.length){w(y.touches[0]);y.stopPropagation()}}}}function w(y){a("body").addClass("noSelect");var z=parseInt(m.obj.css(s),10);e.start=r?y.pageX:y.pageY;g.start=z=="auto"?0:z;if(!x){a(document).bind("mousemove",c);a(document).bind("mouseup",d);m.obj.bind("mouseup",d)}else{document.ontouchmove=function(A){A.preventDefault();c(A.touches[0])};document.ontouchend=d}}function c(y){if(i.ratio<1){if(j.invertscroll&&x){g.now=Math.min((n[j.axis]-m[j.axis]),Math.max(0,(g.start+(e.start-(r?y.pageX:y.pageY)))))}else{g.now=Math.min((n[j.axis]-m[j.axis]),Math.max(0,(g.start+((r?y.pageX:y.pageY)-e.start))))}h=g.now*k.ratio;i.obj.css(s,-h);m.obj.css(s,g.now)}}function d(){a("body").removeClass("noSelect");a(document).unbind("mousemove",c);a(document).unbind("mouseup",d);m.obj.unbind("mouseup",d);document.ontouchmove=document.ontouchend=null}return f()}}(jQuery));