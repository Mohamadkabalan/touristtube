var currentPageAlbum=0;var current_object_selected="";var privacyValue=-1;var privacyArray=new Array();$(document).ready(function(){$(".edit_input").blur();addAutoCompleteList();if(parseInt(channelid)==0){addmoreusersautocomplete_custom_journal($("#addmoretext_custum_privacy_detailed"))}$(document).on("click",".top_arrow",function(){$(".hidden_buttons").toggle()});$(document).on("click",".overdatabutenable",function(){var c=$(this);var d=$(".all_container").attr("data-id");var e=$(".all_container").attr("data-type");if(String(""+c.attr("data-status"))=="1"){enableSharesComments_log(d,e,0);c.attr("data-status","0");c.find(".overdatabutntficon").addClass("inactive")}else{enableSharesComments_log(d,e,1);c.attr("data-status","1");c.find(".overdatabutntficon").removeClass("inactive")}});$(document).on("click","#canceleventdata",function(){$(".error_valid_privacy").html("");parent.window.closeFancy()});$(document).on("click","#canceleventdata_remove",function(){$(".remove_media_container").hide();$(".remove_media_container .error_valid").html("");$(".remove_media_container .uploadinfocheckbox").removeClass("active")});$(document).on("click",".clsimg",function(){$("#saveeventdata_edit_remove").attr("data-id",$(this).closest("li").attr("data-id"));current_object_selected=$(this).closest("li");$(".remove_media_container").show()});$(document).on("click",".albumimg",function(){var d=$(this).closest("li");var e=d.attr("data-id");var c=$(".all_container").attr("data-id");$.post(ReturnLink("/ajax/ajax_addalbumicon.php"),{catid:c,id:e},function(f){$(".albumimg").removeClass("active");d.find(".albumimg").addClass("active")})});$(document).on("click","#add_but_album",function(){parent.window.addMediaAlbumUpload($(".all_container").attr("data-upuri"))});$(document).on("click","#saveeventdata_edit_remove",function(){if($(".remove_media_container .uploadinfocheckbox.active").length==0){$(".remove_media_container .error_valid").html(t("invalid data"))}else{var d=$(this);var g=1;if($(".remove_media_container .uploadinfocheckbox_album").hasClass("active")){g=0}else{if($(".remove_media_container .uploadinfocheckbox_remove").hasClass("active")){g=1}else{return}}var h=d.attr("data-id");var e=current_object_selected;var c=$(".all_container").attr("data-id");var f=new Array();f.push(h);$.post(ReturnLink("/ajax/ajax_deletepiccatalog.php"),{catid:c,idarr:f.join("/*/"),mediacontents:g},function(i){document.location.reload()})}});$(document).on("click","#remove_button",function(){parent.window.addMediaRemove($(".all_container").attr("data-link"))});$(document).on("click","#cancel_custom_privacy",function(){$(".error_valid_privacy").html("");$(".peoplecontainer_custom").addClass("displaynone");$(".info_pop_container").show()});$(document).on("click",".next_div",function(){if(!$(this).hasClass("inactive")){currentPageAlbum++;if(currentPageAlbum>parseInt($(".next_prev_album").attr("data-cnt"))-1){currentPageAlbum=parseInt($(".next_prev_album").attr("data-cnt"))-1}displayalbumrelated()}});$(document).on("click",".prev_div",function(){if(!$(this).hasClass("inactive")){currentPageAlbum--;if(currentPageAlbum<0){currentPageAlbum=0}displayalbumrelated()}});$(document).on("click",".photoimg",function(){var c=$(this);var e=c.attr("data-id");var d=c.attr("channelid")});$(document).on("click","#okeventdata",function(){var c=$(this).parent().parent();$(".error_valid_privacy").html("");privacyValue=parseInt($(".privacyclass.active").attr("data-value"));privacyArray=new Array();if(privacyValue==USER_PRIVACY_SELECTED){c.find(".peoplecontainer_custom .emailcontainer .peoplesdata").each(function(){var d=$(this);if(d.attr("id")=="friendsdata"){privacyArray.push({friends:1})}else{if(d.attr("id")=="friends_of_friends_data"){privacyArray.push({friends_of_friends:1})}else{if(d.attr("id")=="followersdata"){privacyArray.push({followers:1})}else{if(parseInt(d.attr("data-id"))!=0){privacyArray.push({id:d.attr("data-id")})}}}}})}if((privacyValue==USER_PRIVACY_SELECTED&&privacyArray.length>0)||privacyValue!=USER_PRIVACY_SELECTED){$(".peoplecontainer_custom").addClass("displaynone");$(".info_pop_container").show()}else{$(".error_valid_privacy").html(t("Invalid privacy data"))}});$(document).on("click",".privacyclass",function(){$(".privacyclass",$(this).parent().parent()).removeClass("active");$(this).addClass("active");var d=parseInt($(this).attr("data-value"));var c=$("#right_container");$(".uploadinfomandatory span",c).html("");switch(d){case USER_PRIVACY_PRIVATE:initResetSelectedUsers($(this).closest(".tableform").find(".peoplecontainer_custom"));$(".peoplecontainer_custom").addClass("displaynone");$(".info_pop_container").show();$(".uploadinfomandatory",c).addClass("inactive");$(".uploadinfomandatorytitle",c).removeClass("inactive");break;case USER_PRIVACY_SELECTED:$(this).closest(".tableform").find(".peoplecontainer_custom").show();$(".peoplecontainer_custom").removeClass("displaynone");$(".info_pop_container").hide();$(".uploadinfomandatory",c).addClass("inactive");$(".uploadinfomandatorytitle",c).removeClass("inactive");$(".uploadinfomandatorycategory",c).removeClass("inactive");$(".uploadinfomandatorycountry",c).removeClass("inactive");$(".uploadinfomandatorycitynameaccent",c).removeClass("inactive");break;default:initResetSelectedUsers($(this).closest(".tableform").find(".peoplecontainer_custom"));$(".peoplecontainer_custom").addClass("displaynone");$(".info_pop_container").show();$(".uploadinfomandatory",c).addClass("inactive");$(".uploadinfomandatorytitle",c).removeClass("inactive");$(".uploadinfomandatorycategory",c).removeClass("inactive");$(".uploadinfomandatorycountry",c).removeClass("inactive");$(".uploadinfomandatorycitynameaccent",c).removeClass("inactive");break}});$(document).on("click",".peoplesdataclose",function(){var c=$(this).parent();var d=c.parent().parent();c.remove();if(c.attr("data-id")!=""){SelectedUsersDelete(c.attr("data-id"),d.find(".addmore input"))}if(c.attr("id")=="friendsdata"){d.find(".uploadinfocheckbox3").removeClass("active")}else{if(c.attr("id")=="friends_of_friends_data"){d.find(".uploadinfocheckbox_friends_of_friends").removeClass("active")}else{if(c.attr("id")=="followersdata"){d.find(".uploadinfocheckbox4").removeClass("active")}}}});$(document).on("click",".uploadinfocheckbox",function(){if($(this).hasClass("active")){$(this).removeClass("active");if($(this).hasClass("uploadinfocheckbox3")){if($(this).parent().hasClass("friendscontainer")){$(this).parent().parent().find("#friendsdata").remove()}}else{if($(this).hasClass("uploadinfocheckbox_friends_of_friends")){if($(this).parent().hasClass("friendscontainer")){$(this).parent().parent().find("#friends_of_friends_data").remove()}}else{if($(this).hasClass("uploadinfocheckbox4")){if($(this).parent().hasClass("friendscontainer")){$(this).parent().parent().find("#followersdata").remove()}}}}}else{if($(this).hasClass("uploadinfocheckbox3")){if($(this).parent().hasClass("friendscontainer")){var d='<div class="peoplesdata formttl13" id="friendsdata" data-email="" data-id=""><div class="peoplesdatainside">'+t("friends")+'</div><div class="peoplesdataclose"></div></div>';$(this).parent().parent().find(".emailcontainer div:eq(0)").after(d)}}else{if($(this).hasClass("uploadinfocheckbox_friends_of_friends")){if($(this).parent().hasClass("friendscontainer")){var c='<div class="peoplesdata formttl13" id="friends_of_friends_data" data-email="" data-id=""><div class="peoplesdatainside">'+t("friends of friends")+'</div><div class="peoplesdataclose"></div></div>';$(this).parent().parent().find(".emailcontainer div:eq(0)").after(c)}}else{if($(this).hasClass("uploadinfocheckbox4")){if($(this).parent().hasClass("friendscontainer")){var c='<div class="peoplesdata formttl13" id="followersdata" data-email="" data-id=""><div class="peoplesdatainside">'+t("followers")+'</div><div class="peoplesdataclose"></div></div>';$(this).parent().parent().find(".emailcontainer div:eq(0)").after(c)}}else{if($(this).hasClass("uploadinfocheckbox_album")){$(".uploadinfocheckbox_remove").removeClass("active")}else{if($(this).hasClass("uploadinfocheckbox_remove")){$(".uploadinfocheckbox_album").removeClass("active")}}}}}$(this).addClass("active")}});$(document).on("click","#saveeventdata_edit",function(){var e="right_container";if(verifyFormList(e)){var d=$(this).closest("#right_container");if(parseInt(channelid)==0){privacyValue=parseInt($(".privacyclass.active").attr("data-value"))}else{privacyValue=USER_PRIVACY_PUBLIC}if((privacyValue==USER_PRIVACY_SELECTED&&privacyArray.length==0)){$(".error_valid").html(t("Invalid privacy data"));return}var c=$(this);$.post(ReturnLink("/ajax/ajax_updatealbumupload.php"),{privacyValue:privacyValue,privacyArray:privacyArray,catalog_id:$(".all_container").attr("data-id"),title:getObjectData($("#edit_title")),cityname:$("#edit_cityname").val(),cityid:$("#edit_cityname").attr("data-id"),citynameaccent:$("#edit_citynameaccent").val(),is_public:$(".privacyclass.active").attr("data-value"),description:getObjectData($("#edit_description")),category:$("#edit_category").val(),placetakenat:getObjectData($("#edit_placetakenat")),keywords:getObjectData($("#edit_keywords")),country:$("#edit_country").val(),location:""},function(f){if(f!=false){parent.window.closeFancyReload(0)}})}});var b=parseInt($("#right_container").attr("data-value"));$("#privacyclass_user"+b).click();if(b==USER_PRIVACY_SELECTED){$("#right_container").find(".peoplecontainer_custom .emailcontainer .peoplesdata").each(function(){var c=$(this);if(c.attr("id")=="friendsdata"){}else{if(c.attr("id")=="friends_of_friends_data"){}else{if(c.attr("id")=="followersdata"){}else{if(parseInt(c.attr("data-id"))!=0){SelectedUsersAdd(c.attr("data-id"))}}}}})}if(parseInt(channelid)==0){privacyValue=parseInt($(".privacyclass.active").attr("data-value"))}else{privacyValue=USER_PRIVACY_PUBLIC;var a=$("#right_container");$(".peoplecontainer_custom").addClass("displaynone");$(".info_pop_container").show();$(".uploadinfomandatory",a).addClass("inactive");$(".uploadinfomandatorytitle",a).removeClass("inactive");$(".uploadinfomandatorycategory",a).removeClass("inactive");$(".uploadinfomandatorycountry",a).removeClass("inactive");$(".uploadinfomandatorycitynameaccent",a).removeClass("inactive")}privacyArray=new Array();if(privacyValue==USER_PRIVACY_SELECTED){$(".peoplecontainer_custom .emailcontainer .peoplesdata").each(function(){var c=$(this);if(c.attr("id")=="friendsdata"){privacyArray.push({friends:1})}else{if(c.attr("id")=="friends_of_friends_data"){privacyArray.push({friends_of_friends:1})}else{if(c.attr("id")=="followersdata"){privacyArray.push({followers:1})}else{if(parseInt(c.attr("data-id"))!=0){privacyArray.push({id:c.attr("data-id")})}}}}})}initDocumentAlbum()});function verifyFormList(d){var c=true;var a=$("#"+d);$(".uploadinfomandatory span",a).html("");$("input,select,textarea",a).removeClass("err").each(function(){var f=$(this).attr("name");var e=$(this).parent();if((f=="location")||(f=="location_name")||(f=="placetakenat")||(f=="cityname")||(f=="status")||(f=="vid")||$(this).hasClass("filevalue")||(f=="filename")||(f=="addmoretext")||(f=="vpath")){}else{if(($(".uploadinfomandatory"+f,e).css("display")!="none"&&getObjectData($(this))=="")||(f=="category"&&!$(".uploadinfomandatorycategory",e).hasClass("inactive")&&$(this).val()=="0")||(f=="country"&&!$(".uploadinfomandatorycountry",e).hasClass("inactive")&&$(this).val()=="0")){$(".uploadinfomandatory"+f+" span",e).html(t("please fill this field correctly"));c=false}}});var b=$("input[name=cityname]",a).parent();if(getObjectData($("input[name=cityname]",a))==""&&!$(".uploadinfomandatorycitynameaccent",b).hasClass("inactive")&&$("input[name=cityname]",a).length>0){$(".uploadinfomandatorycitynameaccent span",b).html(t("please fill this field correctly"));c=false}if(!c){return false}else{return true}}function initDocumentAlbum(){$(".mediabuttons").mouseover(function(){var a=$(this).offset().left-$("body").offset().left-252;var b=$(this).offset().top-$("body").offset().top-21;$(".ProfileHeaderOver .ProfileHeaderOverin").html($(this).attr("data-title"));$(".ProfileHeaderOver").css("left",a+"px");$(".ProfileHeaderOver").css("top",b+"px");$(".ProfileHeaderOver").stop().show()});$(".mediabuttons").mouseout(function(){$(".ProfileHeaderOver").hide()})}function displayalbumrelated(){$(".upload-overlay-loading-fix").show();$("#canceleventdata_remove").click();$.post(ReturnLink("/ajax/ajax_loadmore_user_viewalbum.php"),{catid:$(".image_cont_album").attr("data-id"),channelid:$(".image_cont_album").attr("data-channelid"),currentPage:currentPageAlbum},function(b){$(".image_cont_album ul").html(b);var a=$(".image_cont_album .currPageStatus");$(".next_prev_album").html(a.html());$(".header_txt span").html("("+a.attr("data-count")+")");a.remove();initDocumentAlbum();$(".upload-overlay-loading-fix").hide()})}function addAutoCompleteList(){var a=$("#edit_citynameaccent");a.autocomplete({appendTo:"#right_container",search:function(d,e){var b=$("select[name=country]",a.parent()).removeClass("err");var c=$("option:selected",b).val();if(c=="ZZ"){b.addClass("err");d.preventDefault()}else{a.autocomplete("option","source",ReturnLink("/ajax/uploadGetCities.php?cc="+c))}},select:function(b,c){a.val(c.item.value);$("input[name=cityname]",a.parent()).val(c.item.value);$("input[name=cityname]",a.parent()).attr("data-id",c.item.id);b.preventDefault()}})}function initResetSelectedUsers(a){a.hide();resetSelectedUsers(a.find(".addmore input"));a.find(".uploadinfocheckbox").removeClass("active");a.find(".addmore input").val("");a.find(".addmore input").blur();a.find(".peoplesdata").each(function(){var b=$(this);b.remove()})}function enableSharesComments_log(a,b,c){$.ajax({url:ReturnLink("/ajax/info_log_updatesharescomments.php"),data:{entity_id:a,entity_type:b,new_status:c,globchannelid:channelGlobalID()},type:"post",success:function(d){}})};