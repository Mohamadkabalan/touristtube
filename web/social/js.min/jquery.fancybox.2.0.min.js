/*
 * fancyBox - jQuery Plugin
 * version: 2.0.6 (Thu, 19 Jul 2012)
 * touch version: 0.1.0 (2.7.14)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
(function(r,d,a,p){var q=a(r),b=a(d),e=a.fancybox=function(){e.open.apply(this,arguments)},n=null,o=null,h=false,c=false,m=d.createTouch!==p,j=function(s){return s&&s.hasOwnProperty&&s instanceof a},l=function(s){return s&&a.type(s)==="string"},i=function(s){return l(s)&&s.indexOf("%")>0},k=function(s){return(s&&!(s.style.overflow&&s.style.overflow==="hidden")&&((s.clientWidth&&s.scrollWidth>s.clientWidth)||(s.clientHeight&&s.scrollHeight>s.clientHeight)))},f=function(t,s){if(s&&i(t)){t=e.getViewport()[s]/100*parseInt(t,10)}return Math.ceil(t)},g=function(t,s){return f(t,s)+"px"};a.extend(e,{version:"2.0.6",defaults:{padding:0,margin:0,width:800,height:600,minWidth:100,minHeight:67,maxWidth:9999,maxHeight:9999,minMoveX:17,minMoveY:17,preventE:true,autoSize:true,autoHeight:false,autoWidth:false,autoResize:!m,autoCenter:!m,fitToView:true,aspectRatio:false,topRatio:0.5,fixed:false,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"right",34:"down",39:"right",40:"down"},prev:{8:"left",33:"up",37:"left",38:"up"},close:[27],play:[32],toggle:[70]},direction:{next:"right",prev:"left"},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0"'+(a.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"none",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"none",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:250,opacity:0.8,css:{cursor:"pointer"},closeClick:true},title:{type:"float"}},onCancel:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeChange:a.noop,beforeClose:a.noop,afterClose:a.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(s,t){if(!s){return}t=a.isPlainObject(t)?t:{};e.close(true);if(!a.isArray(s)){s=j(s)?a(s).get():[s]}a.each(s,function(y,v){var z={},w,C,u,D,A,x,B;if(a.type(v)==="object"){if(v.nodeType){v=a(v)}if(j(v)){z={href:v.attr("href"),title:v.attr("title"),isDom:true,element:v};if(a.metadata){a.extend(true,z,v.metadata())}}else{z=v}}w=t.href||z.href||(l(v)?v:null);C=t.title!==p?t.title:z.title||"";u=t.content||z.content;D=u?"html":(t.type||z.type);if(!D&&z.isDom){D=v.data("fancybox-type");if(!D){A=v.prop("class").match(/fancybox\.(\w+)/);D=A?A[1]:null}}if(l(w)){if(!D){if(e.isImage(w)){D="image"}else{if(e.isSWF(w)){D="swf"}else{if(w.charAt(0)==="#"){D="inline"}else{if(l(v)){D="html";u=v}}}}}if(D==="ajax"){x=w.split(/\s+/,2);w=x.shift();B=x.shift()}}if(!u){if(D==="inline"){if(w){u=a(l(w)?w.replace(/.*(?=#[^\s]+$)/,""):w)}else{if(z.isDom){u=v}}}else{if(D==="html"){u=w}else{if(!D&&!w&&z.isDom){D="inline";u=v}}}}a.extend(z,{href:w,type:D,content:u,title:C,selector:B});s[y]=z});e.opts=a.extend(true,{},e.defaults,t);if(t.keys!==p){e.opts.keys=t.keys?a.extend({},e.defaults.keys,t.keys):false}e.group=s;return e._start(e.opts.index||0)},cancel:function(){var s=e.coming;if(!s||false===e.trigger("onCancel")){return}e.hideLoading();if(s.wrap){s.wrap.stop().trigger("onReset").remove()}e.coming=null;if(e.ajaxLoad){e.ajaxLoad.abort()}e.ajaxLoad=null;if(e.imgPreload){e.imgPreload.onload=e.imgPreload.onerror=null}},close:function(s){e.cancel();if(!e.current||false===e.trigger("beforeClose")){return}e.unbindEvents();if(!e.isOpen||s===true){a(".fancybox-wrap").stop().trigger("onReset").remove();e._afterZoomOut()}else{e.isOpen=e.isOpened=false;e.isClosing=true;a(".fancybox-item").remove();e.wrap.stop(true).removeClass("fancybox-opened");if(e.wrap.css("position")==="fixed"){e.wrap.css(e._getPosition(true))}e.transitions[e.current.closeMethod]()}},play:function(s){var t=function(){clearTimeout(e.player.timer)},u=function(){t();if(e.current&&e.player.isActive){e.player.timer=setTimeout(e.next,e.current.playSpeed)}},w=function(){t();a("body").unbind(".player");e.player.isActive=false;e.trigger("onPlayEnd")},v=function(){if(e.current&&(e.current.loop||e.current.index<e.group.length-1)){e.player.isActive=true;a("body").bind({"afterShow.player onUpdate.player":u,"onCancel.player beforeClose.player":w,"beforeLoad.player":t});u();e.trigger("onPlayStart")}};if(s===true||(!e.player.isActive&&s!==false)){v()}else{w()}},next:function(t){var s=e.current;if(s){if(!l(t)){t=s.direction.next}e.jumpto(s.index+1,t,"next")}},prev:function(t){var s=e.current;if(s){if(!l(t)){t=s.direction.prev}e.jumpto(s.index-1,t,"prev")}},startTouch:function(s){if(s.touches.length==1){n=s.touches[0].pageX;o=s.touches[0].pageY;h=true;this.addEventListener("touchmove",e.moveTouch,false);this.addEventListener("touchend",e.cancelTouch,false)}},moveTouch:function(s){if(e.preventE){s.preventDefault()}if(h){var z=s.touches[0].pageX;var A=s.touches[0].pageY;var v=n-z;var w=o-A;var t=e.current.minMoveX;var u=e.current.minMoveY;if(Math.abs(v)>=t){e.cancelTouch();if(v>0){e.next()}else{e.prev()}}}},cancelTouch:function(){d.body.removeEventListener("touchmove",e.moveTouch,false);d.body.removeEventListener("touchend",e.cancelTouch,false);n=null;o=null;h=false},jumpto:function(u,t,v){var s=e.current;if(!s){return}u=parseInt(u,10);e.direction=t||(u>s.index?"right":"left");e.router=v||"jumpto";if(s.loop){if(u<0){u=s.group.length+(u%s.group.length)}u=u%s.group.length}if(s.group[u]!==p){e.cancel();e._start(u)}},reposition:function(s,t){var u;if(e.isOpen){u=e._getPosition(t);if(s&&s.type==="scroll"){delete u.position;e.wrap.stop(true,true).animate(u,200)}else{e.wrap.css(u)}}},update:function(t){var s=!t||(t&&t.type==="orientationchange"),u=t&&t.type==="scroll";if(s){clearTimeout(c);c=null}if(!e.isOpen||c){return}if(s&&m){e.wrap.removeAttr("style").addClass("fancybox-tmp");e.trigger("onUpdate")}c=setTimeout(function(){var v=e.current;c=null;if(!v){return}e.wrap.removeClass("fancybox-tmp");if((v.autoResize&&!u)||s){e._setDimension();e.trigger("onUpdate")}if((v.autoCenter&&!(u&&v.canShrink))||s){e.reposition(t)}e.trigger("onUpdate")},(s?20:300))},toggle:function(s){if(e.isOpen){e.current.fitToView=a.type(s)==="boolean"?s:!e.current.fitToView;e.update()}},hideLoading:function(){b.unbind("keypress.fb");a("#fancybox-loading").remove()},showLoading:function(){var s,t;e.hideLoading();b.bind("keypress.fb",function(u){if((u.which||u.keyCode)===27){u.preventDefault();e.cancel()}});s=a('<div id="fancybox-loading"><div></div></div>').click(e.cancel).appendTo("body");if(e.coming&&!e.coming.fixed){t=e.getViewport();s.css({position:"absolute",top:(t.h*0.5)+t.y,left:(t.w*0.5)+t.x})}},getViewport:function(){return{x:q.scrollLeft(),y:q.scrollTop(),w:m&&r.innerWidth?r.innerWidth:q.width(),h:m&&r.innerHeight?r.innerHeight:q.height()}},unbindEvents:function(){if(e.wrap&&j(e.wrap)){e.wrap.unbind(".fb")}b.unbind(".fb");q.unbind(".fb")},bindEvents:function(){var s=e.current,t;if(!s){return}q.bind("resize.fb orientationchange.fb"+(s.autoCenter&&!s.fixed?" scroll.fb":""),e.update);t=s.keys;if(t){b.bind("keydown.fb",function(v){var u=v.which||v.keyCode,w=v.target||v.srcElement;if(!v.ctrlKey&&!v.altKey&&!v.shiftKey&&!v.metaKey&&!(w&&(w.type||a(w).is("[contenteditable]")))){a.each(t,function(x,y){if(s.group.length>1&&y[u]!==p){e[x](y[u]);v.preventDefault();return false}if(a.inArray(u,y)>-1){e[x]();v.preventDefault();return false}})}})}if(a.fn.mousewheel&&s.mouseWheel){e.wrap.bind("mousewheel.fb",function(y,v,w,x){var A=y.target||null,z=a(A),u=false;while(z.length){if(u||z.is(".fancybox-skin")||z.is(".fancybox-wrap")){break}u=k(z[0]);z=a(z).parent()}if(v!==0&&!u){if(e.group.length>1&&!s.canShrink){if(x>0||w>0){e.prev(x>0?"up":"left")}else{if(x<0||w<0){e.next(x<0?"down":"right")}}y.preventDefault()}else{if(e.wrap.css("position")==="fixed"){y.preventDefault()}}}})}},trigger:function(s,t){var v,u=t||e[a.inArray(s,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(!u){return}if(a.isFunction(u[s])){v=u[s].apply(u,Array.prototype.slice.call(arguments,1))}if(v===false){return false}if(u.helpers){a.each(u.helpers,function(w,x){if(x&&e.helpers[w]&&a.isFunction(e.helpers[w][s])){e.helpers[w][s](x,u)}})}a.event.trigger(s+".fb")},isImage:function(s){return l(s)&&s.match(/\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$/i)},isSWF:function(s){return l(s)&&s.match(/\.(swf)((\?|#).*)?$/i)},_start:function(u){var s={},w=e.group[u]||null,t,y,v,x;if(!w){return false}s=a.extend(true,{},e.opts,w);v=s.margin;x=s.padding;if(a.type(v)==="number"){s.margin=[v,v,v,v]}if(a.type(x)==="number"){s.padding=[x,x,x,x]}if(s.modal){a.extend(true,s,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:false}}})}if(s.autoSize){s.autoWidth=s.autoHeight=true}if(s.width==="auto"){s.autoWidth=true}if(s.height==="auto"){s.autoHeight=true}s.group=e.group;s.index=u;e.coming=s;if(false===e.trigger("beforeLoad")){e.coming=null;return}y=s.type;t=s.href;if(!y){e.coming=null;if(e.current&&e.router&&e.router!=="jumpto"){e.current.index=u;return e[e.router](e.direction)}return false}e.isActive=true;if(y==="image"||y==="swf"){s.autoHeight=s.autoWidth=false;s.scrolling="visible"}if(y==="image"){s.aspectRatio=true}if(y==="iframe"&&m){s.scrolling="scroll"}s.wrap=a(s.tpl.wrap).addClass("fancybox-"+(m?"mobile":"desktop")+" fancybox-type-"+y+" fancybox-tmp "+s.wrapCSS).appendTo(s.parent);a.extend(s,{skin:a(".fancybox-skin",s.wrap),outer:a(".fancybox-outer",s.wrap),inner:a(".fancybox-inner",s.wrap)});a.each(["Top","Right","Bottom","Left"],function(z,A){s.skin.css("padding"+A,g(s.padding[z]))});if(y==="inline"||y==="html"){if(!s.content||!s.content.length){return e._error("content")}}else{if(!t){return e._error("href")}}if(y==="image"){e._loadImage()}else{if(y==="ajax"){e._loadAjax()}else{if(y==="iframe"){e._loadIframe()}else{e._afterLoad()}}}},_error:function(s){a.extend(e.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:s,content:e.coming.tpl.error});e._afterLoad()},_loadImage:function(){var s=e.imgPreload=new Image();s.onload=function(){this.onload=this.onerror=null;e.coming.width=this.width;e.coming.height=this.height;e._afterLoad()};s.onerror=function(){this.onload=this.onerror=null;e._error("image")};s.src=e.coming.href;if(s.complete===p||!s.complete){e.showLoading()}},_loadAjax:function(){var s=e.coming;e.showLoading();e.ajaxLoad=a.ajax(a.extend({},s.ajax,{url:s.href,error:function(t,u){if(e.coming&&u!=="abort"){e._error("ajax",t)}else{e.hideLoading()}},success:function(t,u){if(u==="success"){s.content=t;e._afterLoad()}}}))},_loadIframe:function(){var s=e.coming,t=a(s.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",m?"auto":s.iframe.scrolling).attr("src",s.href);a(s.wrap).bind("onReset",function(){try{t.hide().parent().empty()}catch(u){}});if(s.iframe.preload){e.showLoading();t.bind("load",function(){a(this).unbind().bind("load.fb",e.update).data("ready",1);e.coming.wrap.removeClass("fancybox-tmp").show();e._afterLoad()})}s.content=t.appendTo(s.inner);if(!s.iframe.preload){e._afterLoad()}},_preloadImages:function(){var u=e.group,t=e.current,x=u.length,s=t.preload?Math.min(t.preload,x-1):0,w,v;for(v=1;v<=s;v+=1){w=u[(t.index+v)%x];if(w.type==="image"&&w.href){new Image().src=w.href}}},_afterLoad:function(){var s=e.coming,x=e.current,u,t,z,y,w,v;e.hideLoading();if(!s||false===e.trigger("afterLoad",s,x)){e.coming.wrap.stop().trigger("onReset").remove();e.coming=null;return}if(x){e.trigger("beforeChange",x);x.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item").remove();if(x.wrap.css("position")==="fixed"){x.wrap.css(e._getPosition(true))}}e.unbindEvents();u=s;t=s.content;z=s.type;y=s.scrolling;a.extend(e,{wrap:u.wrap,skin:u.skin,outer:u.outer,inner:u.inner,current:u,previous:x});w=u.href;switch(z){case"inline":case"ajax":case"html":if(u.selector){t=a("<div>").html(t).find(u.selector)}else{if(j(t)){t=t.show().detach();u.wrap.bind("onReset",function(){a(this).find(".fancybox-inner").children().appendTo(u.parent).hide()})}}break;case"image":t=u.tpl.image.replace("{href}",w);break;case"swf":t='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+w+'"></param>';v="";a.each(u.swf,function(A,B){t+='<param name="'+A+'" value="'+B+'"></param>';v+=" "+A+'="'+B+'"'});t+='<embed src="'+w+'" type="application/x-shockwave-flash" width="100%" height="100%"'+v+"></embed></object>";break}if(!(u.type==="iframe"&&u.iframe.preload)){u.inner.append(t)}e.trigger("beforeShow");e._setDimension();u.wrap.removeClass("fancybox-tmp");u.inner.css("overflow",y==="yes"?"scroll":(y==="no"?"hidden":y));u.pos=a.extend({},u.dim,e._getPosition(true));e.isOpen=false;e.coming=null;e.bindEvents();if(!e.isOpened){a(".fancybox-wrap").not(u.wrap).stop().trigger("onReset").remove()}else{if(x.prevMethod){e.transitions[x.prevMethod]()}}e.transitions[e.isOpened?u.nextMethod:u.openMethod]();e._preloadImages()},_setDimension:function(){var U=e.getViewport(),T=0,u=false,t=false,Z=e.wrap,S=e.skin,D=e.inner,v=e.current,V=v.width,x=v.height,K=v.minWidth,J=v.minHeight,H=v.maxWidth,F=v.maxHeight,Q=v.scrolling,R=v.scrollOutside,E=v.margin,X=E[1]+E[3],z=E[0]+E[2],Y,A,aa,B,O,L,N,M,P,W,y,I,G,C,s;Z.add(S).add(D).width("auto").height("auto");Y=S.outerWidth(true)-S.width();A=S.outerHeight(true)-S.height();aa=X+Y;B=z+A;O=i(V)?(U.w-aa)*parseFloat(V)/100:V;L=i(x)?(U.h-B)*parseFloat(x)/100:x;if(v.type==="iframe"){C=v.content;if(v.autoHeight&&C.data("ready")===1){try{if(C[0].contentWindow.document.location){D.width(O).height(9999);s=C.contents().find("body");if(R){s.css("overflow-x","hidden")}L=s.height()}}catch(w){}}}else{if(v.autoWidth||v.autoHeight){D.addClass("fancybox-tmp");if(v.autoWidth){O=D.width()}if(v.autoHeight){L=D.height()}D.removeClass("fancybox-tmp")}}V=f(O);x=f(L);P=O/L;K=f(i(K)?f(K,"w")-aa:K);H=f(i(H)?f(H,"w")-aa:H);J=f(i(J)?f(J,"h")-B:J);F=f(i(F)?f(F,"h")-B:F);N=H;M=F;I=U.w-X;G=U.h-z;if(v.aspectRatio){if(V>H){V=H;x=V/P}if(x>F){x=F;V=x*P}if(V<K){V=K;x=V/P}if(x<J){x=J;V=x*P}}else{V=Math.max(K,Math.min(V,H));x=Math.max(J,Math.min(x,F))}if(v.fitToView){H=Math.min(U.w-aa,H);F=Math.min(U.h-B,F);D.width(f(V)).height(f(x));Z.width(f(V+Y));W=Z.width();y=Z.height();if(v.aspectRatio){while((W>I||y>G)&&V>K&&x>J){if(T++>19){break}x=Math.max(J,Math.min(F,x-10));V=x*P;if(V<K){V=K;x=V/P}if(V>H){V=H;x=V/P}D.width(f(V)).height(f(x));Z.width(f(V+Y));W=Z.width();y=Z.height()}}else{V=Math.max(K,Math.min(V,V-(W-I)));x=Math.max(J,Math.min(x,x-(y-G)))}}if(R&&Q==="auto"&&x<L&&(V+Y+R)<I){V+=R}D.width(f(V)).height(f(x));Z.width(f(V+Y));W=Z.width();y=Z.height();u=(W>I||y>G)&&V>K&&x>J;t=v.aspectRatio?(V<N&&x<M&&V<O&&x<L):((V<N||x<M)&&(V<O||x<L));a.extend(v,{dim:{width:g(W),height:g(y)},origWidth:O,origHeight:L,canShrink:u,canExpand:t,wPadding:Y,hPadding:A,wrapSpace:y-S.outerHeight(true),skinSpace:S.height()-x});if(!C&&v.autoHeight&&x>J&&x<F&&!t){D.height("auto")}},_getPosition:function(v){var s=e.current,x=e.getViewport(),u=s.margin,y=e.wrap.width()+u[1]+u[3],t=e.wrap.height()+u[0]+u[2],w={position:"absolute",top:u[0]+x.y,left:u[3]+x.x};if(s.autoCenter&&s.fixed&&!v&&t<=x.h&&y<=x.w){w={position:"fixed",top:u[0],left:u[3]}}w.top=g(Math.max(w.top,w.top+((x.h-t)*s.topRatio)));w.left=g(Math.max(w.left,w.left+((x.w-y)*0.5)));return w},_afterZoomIn:function(){var s=e.current;if(!s){return}e.isOpen=e.isOpened=true;e.wrap.addClass("fancybox-opened").css("overflow","visible");e.reposition();if(s.closeClick||s.nextClick){e.inner.css("cursor","pointer").bind("click.fb",function(t){if(!a(t.target).is("a")&&!a(t.target).parent().is("a")){e[s.closeClick?"close":"next"]()}})}if(s.closeBtn){a(s.tpl.closeBtn).appendTo(e.skin).bind("click.fb",e.close)}if(s.arrows&&e.group.length>1){if(s.loop||s.index>0){a(s.tpl.prev).appendTo(e.outer).bind("click.fb",e.prev)}if(s.loop||s.index<e.group.length-1){a(s.tpl.next).appendTo(e.outer).bind("click.fb",e.next)}}e.trigger("afterShow");if(e.opts.autoPlay&&!e.player.isActive){e.opts.autoPlay=false;e.play()}},_afterZoomInFade:function(){var s=e.current;if(!s){return}e.isOpen=e.isOpened=true;e.wrap.addClass("fancybox-opened").css("overflow","visible");e.reposition();if(s.closeClick||s.nextClick){e.inner.css("cursor","pointer").bind("click.fb",function(t){if(!a(t.target).is("a")&&!a(t.target).parent().is("a")){e[s.closeClick?"close":"next"]()}})}if(s.closeBtn){a(s.tpl.closeBtn).appendTo(e.skin).bind("click.fb",e.close)}if(s.arrows&&e.group.length>1){if(s.loop||s.index>0){a(s.tpl.prev).appendTo(e.outer).bind("click.fb",e.prev)}if(s.loop||s.index<e.group.length-1){a(s.tpl.next).appendTo(e.outer).bind("click.fb",e.next)}}e.trigger("afterShow");if(!s.loop&&s.index===s.group.length-1){e.play(false)}else{if(e.opts.autoPlay&&!e.player.isActive){e.opts.autoPlay=false;e.play()}}},_afterZoomOut:function(){var s=e.current;e.wrap.trigger("onReset").remove();a.extend(e,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});e.trigger("afterClose",s)}});e.transitions={getOrigPosition:function(){var s=e.current,t=s.element,w=a(s.orig),x={},z=50,u=50,v=s.hPadding,A=s.wPadding,y;if(!w.length&&s.isDom&&t.is(":visible")){w=t.find("img:first");if(!w.length){w=t}}if(w.length){x=w.offset();if(w.is("img")){z=w.outerWidth();u=w.outerHeight()}}else{y=e.getViewport();x.top=y.y+(y.h-u)*0.5;x.left=y.x+(y.w-z)*0.5}x={top:g(x.top-v*0.5),left:g(x.left-A*0.5),width:g(z+A),height:g(u+v)};return x},step:function(u,t){var x,v,z,w=t.prop,s=e.current,A=s.wrapSpace,y=s.skinSpace;if(w==="width"||w==="height"){x=t.end===t.start?1:(u-t.start)/(t.end-t.start);if(e.isClosing){x=1-x}v=w==="width"?s.wPadding:s.hPadding;z=u-v;e.skin[w](f(w==="width"?z:z-(A*x)));e.inner[w](f(w==="width"?z:z-(A*x)-(y*x)))}},zoomIn:function(){var s=e.current,w=s.pos,t=s.openEffect,u=t==="elastic",v=a.extend({opacity:1},w);delete v.position;if(u){w=this.getOrigPosition();if(s.openOpacity){w.opacity=0.1}}else{if(t==="fade"){w.opacity=0.1}}e.wrap.css(w).animate(v,{duration:t==="none"?0:s.openSpeed,easing:s.openEasing,step:u?this.step:null,complete:e._afterZoomIn})},zoomOut:function(){var s=e.current,t=s.closeEffect,u=t==="elastic",v={opacity:0.1};if(u){v=this.getOrigPosition();if(s.closeOpacity){v.opacity=0.1}}e.wrap.animate(v,{duration:t==="none"?0:s.closeSpeed,easing:s.closeEasing,step:u?this.step:null,complete:e._afterZoomOut})},changeIn:function(){var s=e.current,v=s.nextEffect,y=s.pos,w={opacity:1},t=e.direction,u=200,x;y.opacity=0.1;if(v==="elastic"){x=t==="down"||t==="up"?"top":"left";if(t==="up"||t==="left"){y[x]=g(parseInt(y[x],10)-u);w[x]="+="+u+"px"}else{y[x]=g(parseInt(y[x],10)+u);w[x]="-="+u+"px"}}if(v==="none"){e._afterZoomInFade()}else{e.wrap.css(y).animate(w,{duration:v==="none"?0:s.nextSpeed,easing:s.nextEasing,complete:function(){setTimeout(e._afterZoomIn,10)}})}},changeOut:function(){var w=e.previous,u=w.prevEffect,v={opacity:0.1},s=e.direction,t=200;if(u==="elastic"){v[s==="down"||s==="up"?"top":"left"]=(s==="down"||s==="right"?"-":"+")+"="+t+"px"}w.wrap.animate(v,{duration:u==="none"?0:w.prevSpeed,easing:w.prevEasing,complete:function(){a(this).trigger("onReset").remove()}})}};e.helpers.overlay={overlay:null,update:function(){var u,t,s;this.overlay.width("100%").height("100%");if(a.browser.msie||m){t=Math.max(d.documentElement.scrollWidth,d.body.scrollWidth);s=Math.max(d.documentElement.offsetWidth,d.body.offsetWidth);u=t<s?q.width():t}else{u=b.width()}this.overlay.width(u).height(b.height())},beforeShow:function(s){var t;if(this.overlay){return}s=a.extend(true,{},e.defaults.helpers.overlay,s);t=this.overlay=a('<div id="fancybox-overlay"></div>').css(s.css).appendTo("body").bind("mousewheel",function(u){if(!e.wrap||(e.wrap.css("position")==="fixed"||e.wrap.is(":animated"))){u.preventDefault()}});if(("ontouchstart" in r)||r.DocumentTouch&&d instanceof DocumentTouch){d.body.addEventListener("touchstart",e.startTouch,false)}if(s.closeClick){t.bind("click.fb",e.close)}if(e.defaults.fixed&&!m){t.addClass("overlay-fixed")}else{this.update();this.onUpdate=function(){this.update()}}t.fadeTo(s.speedIn,s.opacity)},afterClose:function(s){if(this.overlay){this.overlay.fadeOut(s.speedOut||0,function(){a(this).remove()})}this.overlay=null}};e.helpers.title={beforeShow:function(s){var u=e.current.title,w=s.type,v,t;if(!l(u)||a.trim(u)===""){return}u="";v=a('<div class="fancybox-title fancybox-title-'+w+'-wrap">'+u+"</div>");switch(w){case"inside":t=e.skin;break;case"outside":t=e.wrap;break;case"over":t=e.inner;break;default:t=e.skin;v.appendTo("body").width(v.width());e.current.margin[2]+=Math.abs(parseInt(v.css("margin-bottom"),10));break}if(s.position==="top"){v.prependTo(t)}else{v.appendTo(t)}}};a.fn.fancybox=function(t){var s,w=a(this),v=this.selector||"",u=function(x){var B=this,y=s,z,A;if(!(x.ctrlKey||x.altKey||x.shiftKey||x.metaKey)&&!a(B).is(".fancybox-wrap")){z=t.groupAttr||"data-fancybox-group";A=a(B).attr(z);if(!A){z="rel";A=B[z]}if(A&&A!==""&&A!=="nofollow"){B=v.length?a(v):w;B=B.filter("["+z+'="'+A+'"]');y=B.index(this)}t.index=y;if(e.open(B,t)!==false){x.preventDefault()}}};t=t||{};s=t.index||0;if(!v||t.live===false){w.unbind("click.fb-start").bind("click.fb-start",u)}else{b.undelegate(v,"click.fb-start").delegate(v+":not('.fancybox-item, .fancybox-nav')","click.fb-start",u)}return this};if(!a.scrollbarWidth){a.scrollbarWidth=function(){var t,s,u;t=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");s=t.children();u=s.innerWidth()-s.height(99).innerWidth();t.remove();return u}}b.ready(function(){a.extend(e.defaults,{scrollOutside:a.scrollbarWidth(),fixed:a.support.fixedPosition||!((a.browser.msie&&a.browser.version<=6)||m),parent:a("body")})})}(window,document,jQuery));