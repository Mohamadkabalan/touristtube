var EventsDetailedCal;var month_array=new Array();var month_birth_array=new Array();$(document).ready(function(){var a=$.cookie("lang");setCalendar();$(document).on("click",".view_all_but",function(){var d=$(this);var c=d.closest(".EventContainer_Items_up");var b=c.find("#first_items").height()+17;d.hide();c.find(".EventContainer_Items").animate({height:b+"px"},500,function(){c.find(".EventContainer_Items").css("height","auto")})});$(document).on("click",".birth_close",function(){$(this).closest(".birth_container").remove()});$(document).on("click",".birth_next",function(){var b=$(this).closest(".birth_container");b.find(".birth_items_content").stop();var d=Math.floor((b.find(".birth_items_content").offset().left-b.find(".birth_items_holder").offset().left)/340);var c=d*340-340;if((c-340+b.find(".birth_items_content").width())<10){$(".birth_next").addClass("disable")}$(".birth_prev").removeClass("disable");b.find(".birth_items_content").animate({left:c+"px"},500)});$(document).on("click",".birth_prev",function(){var b=$(this).closest(".birth_container");b.find(".birth_items_content").stop();var d=Math.floor((b.find(".birth_items_content").offset().left-b.find(".birth_items_holder").offset().left)/340);var c=d*340+340;if((c)>-10){c=0;$(".birth_prev").addClass("disable")}$(".birth_next").removeClass("disable");b.find(".birth_items_content").animate({left:c+"px"},500)});$(document).on("click",".textdiv",function(){$(".linktextarea").hide();$(".texttextarea").show()});$(document).on("click",".linkdiv",function(){$(".texttextarea").hide();$(".linktextarea").show()});$(document).on("click",".birth_pic_calendat22",function(){var c=$(this);var d=c.attr("data-id");var b=c.parent();$(".birth_container").remove();if(DATE_USER_BIRTHInit[d]){var k='<div class="birth_container">';k+='<div class="birth_close"></div>';k+='<div class="birth_icon2"></div>';k+='<div class="birth_text"> '+t("birthdays");k+='<span class="yellowbold12">('+DATE_USER_BIRTHInit[d].length+")</span>";k+="</div>";if(DATE_USER_BIRTHInit[d].length<5){k+='<div class="birth_next disable"></div>'}else{k+='<div class="birth_next"></div>'}k+='<div class="birth_prev disable"></div>';k+='<div class="birth_items_holder">';k+='<div class="birth_items_content">';for(var e=0;e<DATE_USER_BIRTHInit[d].length;e++){var j=DATE_USER_BIRTHInit[d][e];var g=j.imageurl;var l=j.title;var f=j.id;var h=j.lnk;k+='<a class="birth_items" data-id="'+f+'" href="'+h+'">';k+='<img width="56" height="56" src="'+g+'" class="birth_img">';k+='<div class="birth_title">'+l+"</div>";k+='<div class="birth_edit"></div>';k+="</a>"}k+="</div>";k+="</div>";k+="</div>";$("#EventContainer_Calendar").append(k);$(".birth_container").css("top",(b.offset().top+70-$("#EventContainer_Calendar").offset().top)+"px");$(".birth_container").css("left",(b.offset().left-15-$("#EventContainer_Calendar").offset().left)+"px");$(".birth_items_content").css("width",($(".birth_items_content .birth_items").length*85)+"px")}})});function setCalendar(){var d=null;var c=null;EventsDetailedCal=Calendar.setup({cont:"EventContainer_Calendar",bottomBar:false,noScroll:true,selectionType:Calendar.SEL_MULTIPLE,disabled:function(){return true},dateInfo:getDateEVInfo,onChange:function(g,h,f){if(d!=null){clearTimeout(d)}d=setTimeout(function(){clearTimeout(d);for(var k=0;k<month_birth_array.length;k++){if(parseInt(month_birth_array[k])!=0){var j=((k+1)%7)-1;var l=Math.floor(((k+1)/7));if(j<0){j=6;l=l-1}if(l<0){l=0}var m=$(".DynarchCalendar-bodyTable tr").eq(l);var n=m.find("td").eq(j);n.addClass("birth");n.append('<a rel="nofollow" href="#sharepopup" class="birth_pic_calendat" data-id="'+parseInt(month_birth_array[k])+'"></a>')}}month_array=new Array();month_birth_array=new Array();$(".birth_pic_calendat").each(function(){var o=$(this);var p=o.attr("data-id");var i=o.parent();o.fancybox({padding:0,margin:0,beforeLoad:function(){$("#sharepopup").html("");var w='<div class="birth_container">';w+='<div class="birth_icon2"></div>';w+='<div class="birth_text"> '+t("birthdays");w+='<span class="yellowbold12">('+DATE_USER_BIRTHInit[p].length+")</span>";w+="</div>";if(DATE_USER_BIRTHInit[p].length<5){w+='<div class="birth_next disable"></div>'}else{w+='<div class="birth_next"></div>'}w+='<div class="birth_prev disable"></div>';w+='<div class="birth_items_holder">';w+='<div class="birth_items_content">';for(var q=0;q<DATE_USER_BIRTHInit[p].length;q++){var v=DATE_USER_BIRTHInit[p][q];var s=v.imageurl;var x=v.title;var r=v.id;var u=v.lnk;w+='<a class="birth_items" data-id="'+r+'" href="'+u+'">';w+='<img width="56" height="56" src="'+s+'" class="birth_img">';w+='<div class="birth_title">'+x+"</div>";w+='<div class="birth_edit"></div>';w+="</a>"}w+="</div>";w+="</div>";w+="</div>";$("#sharepopup").html(w)}})});$(".DynarchCalendar-day-selected.highlight_user, .DynarchCalendar-day-selected.highlight_user2").parent().click(function(){if($(this).find(".DynarchCalendar-day-selected").hasClass("active")){}if(c!=null){c.removeClass("active")}$(".view_all_but").hide();$(".EventContainer_Items").css("height","157px");c=$(this).find(".DynarchCalendar-day-selected");$(this).find(".DynarchCalendar-day-selected").addClass("active");var p=$(this).find(".DynarchCalendar-day-selected").attr("dyc-date");var q="";var u="";for(var r=0;r<DATE_USER_INFOInit[p].length;r++){var o=DATE_USER_INFOInit[p][r];var s=ReturnLink("/events-detailed/"+o.id);if(parseInt(o._type)==1){q+='<div class="items"><a class="div_class" href="'+s+'"><img class="items_img" width="86" height="56" src="'+o.imageurl+'"><div class="items_title">'+o.title+'</div><div class="items_event yellowbold11">'+t("view event")+'</div></a><img class="items_close" width="18" height="18" src="'+ReturnLink("/images/eventsdetailed/close-tooltip1.jpg")+'"></div>'}else{if(parseInt(o._type)==2){u+='<div class="items"><a class="div_class" href="'+s+'"><img class="items_img" width="86" height="56" src="'+o.imageurl+'"><div class="items_title">'+o.title+'</div><div class="items_event yellowbold11">'+t("view event")+'</div></a><img class="items_close" width="18" height="18" src="'+ReturnLink("/images/eventsdetailed/close-tooltip1.jpg")+'"></div>'}}}$("#eventcontainer_Items1 #first_items").html(q);$("#eventcontainer_Items1 .div_class_text span").html("("+$("#eventcontainer_Items1 #first_items .items").length+")");$("#eventcontainer_Items2 #first_items").html(u);$("#eventcontainer_Items2 .div_class_text span").html("("+$("#eventcontainer_Items2 #first_items .items").length+")");if($("#eventcontainer_Items1 #first_items .items").length>8){$("#eventcontainer_Items1").closest(".EventContainer_Items_up").find(".view_all_but").show()}if($("#eventcontainer_Items2 #first_items .items").length>8){$("#eventcontainer_Items2").closest(".EventContainer_Items_up").find(".view_all_but").show()}if($("#eventcontainer_Items1 #first_items .items").length>0){$("#eventcontainer_Items1").show()}else{$("#eventcontainer_Items1").hide()}if($("#eventcontainer_Items2 #first_items .items").length>0){$("#eventcontainer_Items2").show()}else{$("#eventcontainer_Items2").hide()}})},500)}});$(document).on("click",".items_close",function(){var f=$(this).parent();if($(this).closest(".EventContainer_Items_up").find("#first_items .items").length<=9){$(this).closest(".EventContainer_Items_up").find(".view_all_but").hide()}f.remove()});var a=new Array(),b=0;for(var e in DATE_USER_INFO){a[b]=e;b++}EventsDetailedCal.selection.set(a)}function getDateEVInfo(f,p){var c=Calendar.dateToInt(f);var a="1"+Calendar.printDate(f,"%m-%d");var b=String(a).split("-");a=b[0]+""+b[1];$(".birth_container").remove();if(DATE_USER_BIRTHInit[a]){if(!inArray(c,month_array)){month_birth_array.push(parseInt(a))}}else{if(!inArray(c,month_array)){month_birth_array.push(0)}}month_array.push(c);var m={};if(DATE_USER_INFOInit[c]){var d=new Array();for(var h=0;h<DATE_USER_INFOInit[c].length;h++){var n=DATE_USER_INFOInit[c][h];var l=n.klass;var g=false;for(var k=0;k<d.length;k++){if(d[k]==l){g=true}}if(!g){d.push(l)}}var e="";for(var k=0;k<d.length;k++){var o=d[k].replace(/"/g,"");e+=o+" "}m={klass:e,tooltip:""}}return m}function inArray(d,a){var c=a.length;for(var b=0;b<c;b++){if(a[b]==d){return true}}return false}function updateImage_Add_Posts(a,b){closeFancyBox()}function getObjectData(b){var a=""+b.val();if(a==b.attr("data-value")){a=""}return a};