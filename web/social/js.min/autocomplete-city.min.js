var success=false;var CurrentLocation=new Object();CurrentLocation.latitude=0;CurrentLocation.longitude=0;CurrentLocation.address="";CurrentLocation.country="ZZ";function RetryGetPos(){if(success){return}if(navigator.geolocation){success=true;navigator.geolocation.getCurrentPosition(function(e){var c=e.coords.latitude;var d=e.coords.longitude;CurrentLocation.latitude=c;CurrentLocation.longitude=d;var a=new google.maps.Geocoder();var b=new google.maps.LatLng(c,d);a.geocode({latLng:b},function(f,g){if(g==google.maps.GeocoderStatus.OK){if(!f||f.length==0){return}$.each(f[0].address_components,function(i,h){if(h.types[0]=="country"){CurrentLocation.country=h.short_name}});$.each(f[0].address_components,function(i,h){if(h.types[0]=="administrative_area_level_1"){CurrentLocation.address=h.short_name}});$.each(f[0].address_components,function(i,h){if(h.types[0]=="administrative_area_level_2"){if(CurrentLocation.address.indexOf(h.short_name)==-1){CurrentLocation.address+=", "+h.short_name}}});$.each(f[0].address_components,function(i,h){if(h.types[0]=="administrative_area_level_3"){if(CurrentLocation.address.indexOf(h.short_name)==-1){CurrentLocation.address+=", "+h.short_name}}});$("input[name=lattitude]").each(function(){if(($(this).val()=="")||($(this).val()=="0")){$(this).val(CurrentLocation.latitude)}});$("input[name=longitude]").each(function(){if(($(this).val()=="")||($(this).val()=="0")){$(this).val(CurrentLocation.longitude)}})}})},function(){handleNoGeolocation(true)})}else{handleNoGeolocation(false)}}function handleNoGeolocation(a){if(a){}else{success=true}}$(document).ready(function(){RetryGetPos()});