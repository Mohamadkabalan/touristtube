(function(a){a.fn.marquee=function(d){var f=[],e=this.length;function c(k,i,j){var g=j.behavior,m=j.width,h=j.dir;var l=0;if(g=="alternate"){l=k==1?i[j.widthAxis]-(m*2):m}else{if(g=="slide"){if(k==-1){l=h==-1?i[j.widthAxis]:m}else{l=h==-1?i[j.widthAxis]-(m*2):0}}else{l=k==-1?i[j.widthAxis]:0}}return l}function b(){var j=f.length,k=null,g=null,l={},m=[],h=false;while(j--){k=f[j];g=a(k);l=g.data("marqueeState");if(g.data("paused")!==true){k[l.axis]+=(l.scrollamount*l.dir);h=l.dir==-1?k[l.axis]<=c(l.dir*-1,k,l):k[l.axis]>=c(l.dir*-1,k,l);if((l.behavior=="scroll"&&l.last==k[l.axis])||(l.behavior=="alternate"&&h&&l.last!=-1)||(l.behavior=="slide"&&h&&l.last!=-1)){if(l.behavior=="alternate"){l.dir*=-1}l.last=-1;g.trigger("stop");l.loops--;if(l.loops===0){if(l.behavior!="slide"){k[l.axis]=c(l.dir,k,l)}else{k[l.axis]=c(l.dir*-1,k,l)}g.trigger("end")}else{m.push(k);g.trigger("start");k[l.axis]=c(l.dir,k,l)}}else{m.push(k)}l.last=k[l.axis];g.data("marqueeState",l)}else{m.push(k)}}f=m;if(f.length){setTimeout(b,25)}}this.each(function(m){var g=a(this),p=g.attr("width")||g.width(),k=g.attr("height")||g.height(),h=g.after("<div "+(d?'class="'+d+'" ':"")+'style="display: block-inline; width: '+p+"px; height: "+k+'px; overflow: hidden;"><div style="float: left; white-space: nowrap;">'+g.html()+"</div></div>").next(),n=h.get(0),l=0,j=(g.attr("direction")||"left").toLowerCase(),o={dir:/down|right/.test(j)?-1:1,axis:/left|right/.test(j)?"scrollLeft":"scrollTop",widthAxis:/left|right/.test(j)?"scrollWidth":"scrollHeight",last:-1,loops:g.attr("loop")||-1,scrollamount:g.attr("scrollamount")||this.scrollAmount||2,behavior:(g.attr("behavior")||"scroll").toLowerCase(),width:/left|right/.test(j)?p:k};if(g.attr("loop")==-1&&o.behavior=="slide"){o.loops=1}g.remove();if(/left|right/.test(j)){h.find("> div").css("padding","0 "+p+"px")}else{h.find("> div").css("padding",k+"px 0")}h.bind("stop",function(){h.data("paused",true)}).bind("pause",function(){h.data("paused",true)}).bind("start",function(){h.data("paused",false)}).bind("unpause",function(){h.data("paused",false)}).data("marqueeState",o);f.push(n);n[o.axis]=c(o.dir,n,o);h.trigger("start");if(m+1==e){b()}});return a(f)}}(jQuery));