var Running=false;var geocoder=new google.maps.Geocoder();var Interval=0;function ProfileSetPosition(b,a){clearInterval(Interval);$.ajax({url:ReturnLink("/ajax/setPosition.php"),data:{latitude:a,longitude:b},type:"post"})}function ProfileRetryGetPos(){if(Running){return}if(navigator.geolocation){Running=true;navigator.geolocation.getCurrentPosition(function(a){Running=false;ProfileSetPosition(a.coords.longitude,a.coords.latitude)},function(){Running=false;ProfilehandleNoGeolocation()},{timeout:5000})}else{ProfilehandleNoGeolocation()}}function ProfilehandleNoGeolocation(){Running=true;geocoder.geocode({address:GEO_COUNTRY},function(c,e){Running=false;if(e==google.maps.GeocoderStatus.OK&&c.length>0){var d=c[0].geometry.location;var a=c[0].geometry.location.lat();var b=c[0].geometry.location.lng();ProfileSetPosition(b,a)}})}$(document).ready(function(){ProfileRetryGetPos();Interval=setInterval(ProfileRetryGetPos,2000)});