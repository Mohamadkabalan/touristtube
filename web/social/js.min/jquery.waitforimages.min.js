(function(a){var b="waitForImages";a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]};a.expr[":"].uncached=function(d){if(!a(d).is('img[src!=""]')){return false}var c=document.createElement("img");c.src=d.src;return !c.complete};a.fn.waitForImages=function(d,c,e){if(a.isPlainObject(arguments[0])){c=d.each;e=d.waitForAll;d=d.finished}d=d||a.noop;c=c||a.noop;e=!!e;if(!a.isFunction(d)||!a.isFunction(c)){throw new TypeError("An invalid callback was supplied.")}return this.each(function(){var k=a(this),f=[];if(e){var i=a.waitForImages.hasImageProperties||[],j=/url\((['"]?)(.*?)\1\)/g;k.find("*").each(function(){var l=a(this);if(l.is("img:uncached")){f.push({src:l.attr("src"),element:l[0]})}a.each(i,function(m,o){var p=l.css(o);if(!p){return true}var n;while(n=j.exec(p)){f.push({src:n[2],element:l[0]})}})})}else{k.find("img:uncached").each(function(){f.push({src:this.src,element:this})})}var g=f.length,h=0;if(g==0){d.call(k[0])}a.each(f,function(l,n){var m=new Image;a(m).bind("load."+b+" error."+b,function(o){h++;c.call(n.element,h,g,o.type=="load");if(h==g){d.call(k[0]);return false}});m.src=n.src})})}})(jQuery);