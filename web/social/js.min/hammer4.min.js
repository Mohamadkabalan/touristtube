/* Hammer.JS - v1.0.3 - 2013-03-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
(function(K){var r=function(L,M){return new r.Instance(L,M||{})};r.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};r.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;r.HAS_TOUCHEVENTS=("ontouchstart" in K);r.EVENT_TYPES={};r.DIRECTION_DOWN="down";r.DIRECTION_LEFT="left";r.DIRECTION_UP="up";r.DIRECTION_RIGHT="right";r.POINTER_MOUSE="mouse";r.POINTER_TOUCH="touch";r.POINTER_PEN="pen";r.EVENT_START="start";r.EVENT_MOVE="move";r.EVENT_END="end";r.plugins={};r.READY=false;function A(){if(r.READY){return}r.event.determineEventTypes();for(var L in r.gestures){if(r.gestures.hasOwnProperty(L)){r.detection.register(r.gestures[L])}}r.event.onTouch(document,r.EVENT_MOVE,r.detection.detect);r.event.onTouch(document,r.EVENT_END,r.detection.endDetect);r.READY=true}r.Instance=function(L,M){var N=this;A();this.element=L;this.enabled=true;this.options=r.utils.extend(r.utils.extend({},r.defaults),M||{});if(this.options.stop_browser_behavior){r.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior)}r.event.onTouch(L,r.EVENT_START,function(O){if(N.enabled){r.detection.startDetect(N,O)}});return this};r.Instance.prototype={on:function w(L,N){var M=L.split(" ");for(var O=0;O<M.length;O++){this.element.addEventListener(M[O],N,false)}return this},off:function v(L,N){var M=L.split(" ");for(var O=0;O<M.length;O++){this.element.removeEventListener(M[O],N,false)}return this},trigger:function J(N,M){var L=document.createEvent("Event");L.initEvent(N,true,true);L.gesture=M;this.element.dispatchEvent(L);return this},enable:function e(L){this.enabled=L;return this}};var u=null;var f=false;var G=false;r.event={bindDom:function(L,O,M){var P=O.split(" ");for(var N=0;N<P.length;N++){L.addEventListener(P[N],M,false)}},onTouch:function x(L,M,N){var O=this;this.bindDom(L,r.EVENT_TYPES[M],function(P){var Q=P.type.toLowerCase();if(Q.match(/mouseup/)&&G){G=false;return}if(Q.match(/touch/)||(Q.match(/mouse/)&&P.which===1)||(r.HAS_POINTEREVENTS&&Q.match(/down/))){f=true}if(Q.match(/touch|pointer/)){G=true}if(f&&!(G&&Q.match(/mouse/))){if(r.HAS_POINTEREVENTS&&M!=r.EVENT_END){r.PointerEvent.updatePointer(M,P)}if(M===r.EVENT_END&&u!==null){P=u}else{u=P}N.call(r.detection,O.collectEventData(L,M,P));if(r.HAS_POINTEREVENTS&&M==r.EVENT_END){r.PointerEvent.updatePointer(M,P)}}if(Q.match(/up|cancel|end/)){f=false;u=null;r.PointerEvent.reset()}})},determineEventTypes:function c(){var L;if(r.HAS_POINTEREVENTS){L=r.PointerEvent.getEvents()}else{L=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}r.EVENT_TYPES[r.EVENT_START]=L[0];r.EVENT_TYPES[r.EVENT_MOVE]=L[1];r.EVENT_TYPES[r.EVENT_END]=L[2]},getTouchList:function q(L){if(r.HAS_POINTEREVENTS){return r.PointerEvent.getTouchList()}else{if(L.touches){return L.touches}else{return[{identifier:1,pageX:L.pageX,pageY:L.pageY,target:L.target}]}}},collectEventData:function a(L,N,M){var P=this.getTouchList(M,N);var O=r.POINTER_TOUCH;if(M.type.match(/mouse/)||r.PointerEvent.matchType(r.POINTER_MOUSE,M)){O=r.POINTER_MOUSE}return{center:r.utils.getCenter(P),timestamp:M.timestamp||new Date().getTime(),target:M.target,touches:P,eventType:N,pointerType:O,srcEvent:M,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation()}if(this.srcEvent.preventDefault){this.srcEvent.preventDefault()}},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return r.detection.stopDetect()}}}};r.PointerEvent={pointers:{},getTouchList:function(){var L=this.pointers;var M=[];Object.keys(L).sort().forEach(function(N){M.push(L[N])});return M},updatePointer:function(M,L){if(M==r.EVENT_END){delete this.pointers[L.pointerId]}else{L.identifier=L.pointerId;this.pointers[L.pointerId]=L}},matchType:function(M,L){if(!L.pointerType){return false}var N={};N[r.POINTER_MOUSE]=(L.pointerType==L.MSPOINTER_TYPE_MOUSE||L.pointerType==r.POINTER_MOUSE);N[r.POINTER_TOUCH]=(L.pointerType==L.MSPOINTER_TYPE_TOUCH||L.pointerType==r.POINTER_TOUCH);N[r.POINTER_PEN]=(L.pointerType==L.MSPOINTER_TYPE_PEN||L.pointerType==r.POINTER_PEN);return N[M]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};r.utils={extend:function h(L,N){for(var M in N){L[M]=N[M]}return L},getCenter:function k(N){var O=[],P=[];for(var M=0,L=N.length;M<L;M++){O.push(N[M].pageX);P.push(N[M].pageY)}return{pageX:((Math.min.apply(Math,O)+Math.max.apply(Math,O))/2),pageY:((Math.min.apply(Math,P)+Math.max.apply(Math,P))/2)}},getVelocity:function p(L,M,N){return{x:Math.abs(M/L)||0,y:Math.abs(N/L)||0}},getAngle:function j(L,M){var O=M.pageY-L.pageY,N=M.pageX-L.pageX;return Math.atan2(O,N)*180/Math.PI},getDirection:function l(L,M){var N=Math.abs(L.pageX-M.pageX),O=Math.abs(L.pageY-M.pageY);if(N>=O){return L.pageX-M.pageX>0?r.DIRECTION_LEFT:r.DIRECTION_RIGHT}else{return L.pageY-M.pageY>0?r.DIRECTION_UP:r.DIRECTION_DOWN}},getDistance:function m(L,M){var N=M.pageX-L.pageX,O=M.pageY-L.pageY;return Math.sqrt((N*N)+(O*O))},getScale:function o(M,L){if(M.length>=2&&L.length>=2){return this.getDistance(L[0],L[1])/this.getDistance(M[0],M[1])}return 1},getRotation:function n(M,L){if(M.length>=2&&L.length>=2){return this.getAngle(L[1],L[0])-this.getAngle(M[1],M[0])}return 0},isVertical:function t(L){return(L==r.DIRECTION_UP||L==r.DIRECTION_DOWN)},stopDefaultBrowserBehavior:function C(M,L){var P,Q=["webkit","khtml","moz","ms","o",""];if(!L||!M.style){return}for(var N=0;N<Q.length;N++){for(var O in L){if(L.hasOwnProperty(O)){P=O;if(Q[N]){P=Q[N]+P.substring(0,1).toUpperCase()+P.substring(1)}M.style[P]=L[O]}}}if(L.userSelect=="none"){M.onselectstart=function(){return false}}}};r.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function B(M,L){if(this.current){return}this.stopped=false;this.current={inst:M,startEvent:r.utils.extend({},L),lastEvent:false,name:""};this.detect(L)},detect:function b(L){if(!this.current||this.stopped){return}L=this.extendEventData(L);var O=this.current.inst.options;for(var M=0,P=this.gestures.length;M<P;M++){var N=this.gestures[M];if(!this.stopped&&O[N.name]!==false){if(N.handler.call(N,L,this.current.inst)===false){this.stopDetect();break}}}if(this.current){this.current.lastEvent=L}},endDetect:function g(L){this.detect(L);this.stopDetect()},stopDetect:function D(){this.previous=r.utils.extend({},this.current);this.current=null;this.stopped=true},extendEventData:function i(O){var R=this.current.startEvent;if(R&&(O.touches.length!=R.touches.length||O.touches===R.touches)){R.touches=[];for(var P=0,Q=O.touches.length;P<Q;P++){R.touches.push(r.utils.extend({},O.touches[P]))}}var L=O.timestamp-R.timestamp,M=O.center.pageX-R.center.pageX,N=O.center.pageY-R.center.pageY,S=r.utils.getVelocity(L,M,N);r.utils.extend(O,{deltaTime:L,deltaX:M,deltaY:N,velocityX:S.x,velocityY:S.y,distance:r.utils.getDistance(R.center,O.center),angle:r.utils.getAngle(R.center,O.center),direction:r.utils.getDirection(R.center,O.center),scale:r.utils.getScale(R.touches,O.touches),rotation:r.utils.getRotation(R.touches,O.touches),startEvent:R});return O},register:function y(L){var M=L.defaults||{};if(typeof(M[L.name])=="undefined"){M[L.name]=true}r.utils.extend(r.defaults,M);L.index=L.index||1000;this.gestures.push(L);this.gestures.sort(function(N,O){if(N.index<O.index){return -1}if(N.index>O.index){return 1}return 0});return this.gestures}};r.gestures=r.gestures||{};r.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function s(L,M){switch(L.eventType){case r.EVENT_START:clearTimeout(this.timer);r.detection.current.name=this.name;this.timer=setTimeout(function(){if(r.detection.current.name=="hold"){M.trigger("hold",L)}},M.options.hold_timeout);break;case r.EVENT_MOVE:if(L.distance>M.options.hold_threshold){clearTimeout(this.timer)}break;case r.EVENT_END:clearTimeout(this.timer);break}}};r.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function F(L,M){if(L.eventType==r.EVENT_END){var N=r.detection.previous;if(L.deltaTime>M.options.tap_max_touchtime||L.distance>M.options.tap_max_distance){return}if(N&&N.name=="tap"&&(L.timestamp-N.lastEvent.timestamp)<M.options.doubletap_interval&&L.distance<M.options.doubletap_distance){r.detection.current.name="doubletap"}else{r.detection.current.name="tap"}M.trigger(r.detection.current.name,L)}}};r.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function E(L,M){if(L.eventType==r.EVENT_END){if(M.options.swipe_max_touches>0&&L.touches.length>M.options.swipe_max_touches){return}if(L.velocityX>M.options.swipe_velocity||L.velocityY>M.options.swipe_velocity){M.trigger(this.name,L);M.trigger(this.name+L.direction,L)}}}};r.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false},triggered:false,handler:function d(L,M){if(r.detection.current.name!=this.name&&this.triggered){M.trigger(this.name+"end",L);this.triggered=false;return}if(M.options.drag_max_touches>0&&L.touches.length>M.options.drag_max_touches){return}switch(L.eventType){case r.EVENT_START:this.triggered=false;break;case r.EVENT_MOVE:if(L.distance<M.options.drag_min_distance&&r.detection.current.name!=this.name){return}r.detection.current.name=this.name;var N=r.detection.current.lastEvent.direction;if(M.options.drag_lock_to_axis&&N!==L.direction){if(r.utils.isVertical(N)){L.direction=(L.deltaY<0)?r.DIRECTION_UP:r.DIRECTION_DOWN}else{L.direction=(L.deltaX<0)?r.DIRECTION_LEFT:r.DIRECTION_RIGHT}}if(!this.triggered){M.trigger(this.name+"start",L);this.triggered=true}M.trigger(this.name,L);M.trigger(this.name+L.direction,L);if((M.options.drag_block_vertical&&r.utils.isVertical(L.direction))||(M.options.drag_block_horizontal&&!r.utils.isVertical(L.direction))){L.preventDefault()}break;case r.EVENT_END:if(this.triggered){M.trigger(this.name+"end",L)}this.triggered=false;break}}};r.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:false},triggered:false,handler:function I(L,M){if(r.detection.current.name!=this.name&&this.triggered){M.trigger(this.name+"end",L);this.triggered=false;return}if(L.touches.length<2){return}if(M.options.transform_always_block){L.preventDefault()}switch(L.eventType){case r.EVENT_START:this.triggered=false;break;case r.EVENT_MOVE:var O=Math.abs(1-L.scale);var N=Math.abs(L.rotation);if(O<M.options.transform_min_scale&&N<M.options.transform_min_rotation){return}r.detection.current.name=this.name;if(!this.triggered){M.trigger(this.name+"start",L);this.triggered=true}M.trigger(this.name,L);if(N>M.options.transform_min_rotation){M.trigger("rotate",L)}if(O>M.options.transform_min_scale){M.trigger("pinch",L);M.trigger("pinch"+((L.scale<1)?"in":"out"),L)}break;case r.EVENT_END:if(this.triggered){M.trigger(this.name+"end",L)}this.triggered=false;break}}};r.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:false},handler:function H(L,M){if(M.options.prevent_default){L.preventDefault()}if(L.eventType==r.EVENT_START){M.trigger(this.name,L)}}};r.gestures.Release={name:"release",index:Infinity,handler:function z(L,M){if(L.eventType==r.EVENT_END){M.trigger(this.name,L)}}};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=r}else{K.Hammer=r;if(typeof K.define==="function"&&K.define.amd){K.define("hammer",[],function(){return r})}}})(this);