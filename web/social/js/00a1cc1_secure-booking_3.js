$(document).ready(function(){$("#bookNow").click(function(){if(!validateBookingFields()){return false}var em=$("#email").val();console.log("email "+em);var yourPassword=$("#YourPassword").val();if(typeof yourPassword!=="undefined"&&yourPassword!==""&&yourPassword.length>=8&&alphanumeric(yourPassword)){$.ajax({url:"/users/register/addSubmit",data:{yourEmail:$("#email").val(),yourUserName:$("#email").val(),yourPassword:yourPassword,password:yourPassword,userId:0},type:"post",success:function(data){var jres=null;try{jres=data;var status=jres.status}catch(Ex){}}})}showDealsOverlay("bookContainer");$(this).prop("type","submit")});countryDialingCodeMap=$.parseJSON(countryDialingCodeMap);$(document).on("change","#country",function(){$("input[name='dialingCode']").val(countryDialingCodeMap[$("#country").val()]);$("#mobile_country_code_select").val($("#country").val())});if($("#agreeTermsId").length){$("#agreeTermsId").on("change",function(){if($(this).is(":checked")){$("#bookNow").removeAttr("disabled")}})}});function validateBookingFields(){showDealsOverlay("bookContainer");var data={fields:[{fieldname:"title",required:"true",displayName:"Name Title"},{fieldname:"firstName",required:"true",displayName:"First name"},{fieldname:"lastName",required:"true",displayName:"Last name"},{fieldname:"country",required:"true",displayName:"Country"},{fieldname:"mobile_country_code",required:"true",displayName:"Area Code"},{fieldname:"email",required:"true",displayName:"Email Address",email:"true"},{fieldname:"mobile",required:"true",displayName:"Mobile phone number"},{fieldname:"ccBillingAddress",required:"true",displayName:"Credit card billing address"}]};var numPatt=/[^0-9]/i;var emailPatt=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/i;var errorMsg="";$.each(data,function(i){$.each(data[i],function(key,val){$("[name='"+val.fieldname+"']").each(function(j,k){if($(this).length==0){return true}var len=$(this).val().length;if(val.required&&len===0){errorMsg+="\r\n"+val.displayName;return false}if(typeof val.numeric!=="undefined"&&val.numeric&&numPatt.test($(this).val())){errorMsg+="\r\n"+val.displayName;return false}if(typeof val.email!=="undefined"&&val.email&&!emailPatt.test($(this).val())){errorMsg+="\r\n"+val.displayName;return false}})})});hideDealsOverlay();if(errorMsg!==""){alert("Invalid values for fields:\r\n"+errorMsg);return false}return true}